<h1 align="center" style="max-width: 100%;">
  <img width="1100" alt="Logo" src="README.assets/Logo.png" style="max-width: 100%;" /><br/>
  <a href="https://www.prismfilmstudio.com">             www.prismfilmstudio.com</a>
</h1>



###                                  [**í´ëŸ¬ìŠ¤í„°ë§ ê¸°ë°˜ ìƒ‰ì±„ ì¶”ì¶œ ë° ê³„ì‚°**](#ìƒ‰ì±„-ë°ì´í„°-ë§Œë“¤ê¸°) / [**ìŒì„±ì¸ì‹**](#ìŒì„±ì¸ì‹) / [**ë“œë¡œì‰**](#ë“œë¡œì‰)

<p align="center">
  <b>SSAFY 1í•™ê¸° ìµœì¢… í”„ë¡œì íŠ¸(21.11.17 ~ 21.11.24)</b><br /></p>


<p align="center">
  <b>Supported</b><br/>
  <a href="#"><img width="45" src="https://blog.kakaocdn.net/dn/cVaSOX/btqD9jVw36X/jHpIEqn2EAk7xdKMMmpEP0/img.png" alt="C#" /></a>&nbsp;&nbsp;
  <a href="#"><img width="45" src="https://filestore.community.support.microsoft.com/api/images/a7899ec5-bd4c-4b38-9233-173397ef577f?upload=true" alt="Python" /></a>&nbsp;&nbsp;
  <a href="#"><img width="45" src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c3/Python-logo-notext.svg/768px-Python-logo-notext.svg.png" alt="JS" /></a>&nbsp;&nbsp;
  <a href="#"><img width="45" src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/99/Unofficial_JavaScript_logo_2.svg/1200px-Unofficial_JavaScript_logo_2.svg.png" alt="Preact" /></a>&nbsp;&nbsp;
  <a href="#"><img width="45" src="https://media.vlpt.us/images/ec532/post/bc893d61-4eaa-4f8f-9b2c-e2d2143506a4/aws_ec2.svg" alt="EC2" /></a>
</p>


<table style="table-layout: fixed; overflow-wrap: break-word;">
  <tbody>
    <tr>
      <td><a href="#" target="_blank"><img width="500" src="README.assets/voice.gif" alt="iPhone demo" style="max-width: 100%;" /></a></td>
      <td><a href="#" target="_blank"><img width="500" src="README.assets/choice.gif" alt="Music app demo" style="max-width: 100%;" /></a></td>
      <td rowspan="2" style="display:flex-column;"><img height="250" src="README.assets/detail3.gif" alt="Full page demo" style="max-width: 100%;" /><div style="height:15px;"></div></div><img height="250" src="README.assets/draw5.png" alt="Full page demo" style="max-width: 100%;" /></td>
    </tr>
    <tr>
      <td colspan="2"><a href="#" target="_blank"><img width="1000" src="README.assets/main5.png" alt="Parallax demo" style="max-width: 100%;" /></a></td>
    </tr>
  </tbody>
</table>
<h6 align="center">
  www.prismfilmstudio.com <a href="https://prismfilmstudio.com"></a>
</h6>




-----


## âœ¨ Stack

#### ì£¼ìš”  Stack

|                        Content                         |           Main            |                          Detail                          |
| :----------------------------------------------------: | :-----------------------: | :------------------------------------------------------: |
|               [**ìŒì„±ì¸ì‹**](#ìŒì„±ì¸ì‹ )               | Python 3.9.6 / JavaScript |             webkitSpeechRecognition / Axios              |
|                 [**ë“œë¡œì‰**](#ë“œë¡œì‰)                  |        JavaScript         |                Canvas / Blob Data/ Axios                 |
|                       [**FE**]()                       |  HTML / CSS / JavaScript  |            Django 3.2.9 / HTML5 / CSS3 / ES6             |
|         [**í´ëŸ¬ìŠ¤í„°ë§**](#ìƒ‰ì±„-ë°ì´í„°-ë§Œë“¤ê¸°)          |  C# .Net Framework 4.7.2  |            C#(OpenCvSharp4 - V4.5.3.20210817)            |
| [**RGB Calculating**](#ì•Œê³ ë¦¬ì¦˜-êµ¬ì„±-ë°-ì›¹í˜ì´ì§€-ì‘ì—…) |       Python 3.9.6        |                       Python(Math)                       |
|                     [**DB**](#db)                      |       Python 3.9.6        |                    Python(Shell_plus)                    |
|           [**Query ìµœì í™”**](#query-ìµœì í™”)            |       Django 3.2.9        |      prefetch_related / annotate / filter / exclude      |
|                   [**ë°°í¬**](#ë°°í¬)                    |            AWS            | EC2(Ubuntu Server 18.04 LTS) / Cloud9 / Gunicorn / NGINX |



#### ê¸°ë³¸ Stack

|       ent        |      Page       |                         Description                          |
| :--------------: | :-------------: | :----------------------------------------------------------: |
|       User       |    accounts/    |                 íšŒì›ê°€ì… / ë¡œê·¸ì¸ / ë¡œê·¸ì•„ì›ƒ                 |
|   ì˜ˆê³ í¸ ë³´ê¸°    |     detail/     |          ì˜í™” í¬ìŠ¤í„° ëˆ„ë¥¼ ì‹œ, ì˜ˆê³ í¸ íŒì—… ìë™ì¬ìƒ           |
|   ìƒ‰ì±„ ê³ ë¥´ê¸°    |     choice/     |                  ì¶”ì²œ ë°›ê³  ì‹¶ì€ ìƒ‰ì±„ ê³ ë¥´ê¸°                  |
|   í‰ì ìˆœ ì •ë ¬    |      base/      | TMDB í‰ì  ìˆœìœ¼ë¡œ ì •ë ¬ / í•œì¤„í‰\|ë¦¬ë·° ë‚¨ê¸¸ì‹œ ì¶”ì²œ ì•ˆí•˜ë„ë¡ êµ¬ì„± |
|   ìµœì‹ ìˆœ ì •ë ¬    |      base/      | ê°œë´‰ì¼ ìµœì‹  ìˆœìœ¼ë¡œ ì •ë ¬ / í•œì¤„í‰\|ë¦¬ë·° ë‚¨ê¸¸ì‹œ ì¶”ì²œ ì•ˆí•˜ë„ë¡ êµ¬ì„± |
| ì´ì „ ìƒ‰ì±„ë¡œ ì •ë ¬ |      base/      | AI Z Score ìˆœìœ¼ë¡œ ì •ë ¬ / í•œì¤„í‰\|ë¦¬ë·° ë‚¨ê¸¸ì‹œ ì¶”ì²œ ì•ˆí•˜ë„ë¡ êµ¬ì„± |
| ì‚¬ìš©ì í‰ê·  í‰ì  |     detail/     |        ì˜í™”ì— ëŒ€í•´ ìœ ì €ê°€ ë‚¨ê¸´ í‰ê·  í‰ì  ê³„ì‚° ë° ì¶œë ¥        |
| ì˜í™” í‚¤ì›Œë“œ ê²€ìƒ‰ |      base/      | ê²€ìƒ‰ ê¸°ëŠ¥ìœ¼ë¡œ ì œëª© > ë‚´ìš©ì— í‚¤ì›Œë“œ í¬í•¨ì—¬ë¶€ì— ë”°ë¼ ì •ë ¬í•´ì„œ ì¶œë ¥ |
|   í€´ì¦ˆ ë§Œë“¤ê¸°    |  quiz_create/   |      ì‚¬ìš©ìê°€ ì˜í™”ì— ëŒ€í•œ ê·¸ë¦¼ í€´ì¦ˆë¥¼ ë‚¼ ìˆ˜ ìˆë„ë¡ êµ¬ì„±      |
|    í€´ì¦ˆ í’€ê¸°     |      quiz/      | ì‚¬ìš©ìë“¤ë¼ë¦¬ ë¬¸ì œë¥¼ í’€ê³  í‹°ì–´ì— ëŒ€í•œ ì ìˆ˜ë¥¼ ì–»ì„ ìˆ˜ ìˆë„ë¡ êµ¬ì„± |
|  í‰ì  ë° í•œì¤„í‰  | movie_comment/  |       ì˜í™”ì— ëŒ€í•œ ë³„ì ê³¼ í•œì¤„í‰ì„ ë‚¨ê¸¸ ìˆ˜ ìˆë„ë¡ êµ¬ì„±        |
|   ë¦¬ë·°(+ê·¸ë¦¼)    |     review/     |           ê·¸ë¦¼ì„ ê·¸ë¦¬ë©° ë¦¬ë·°ë¥¼ ë‚¨ê¸¸ ìˆ˜ ìˆë„ë¡ êµ¬ì„±           |
|   ë¦¬ë·° ì† ëŒ“ê¸€   | review_comment/ |             ë¦¬ë·°ë§ˆë‹¤ ëŒ“ê¸€ì„ ë‚¨ê¸¸ ìˆ˜ ìˆë„ë¡ êµ¬ì„±              |
|    ìœ ì € í‹°ì–´     |      tier/      | ë¸Œë¡ ì¦ˆë¶€í„° ë§ˆìŠ¤í„°ê¹Œì§€ ë¦¬ë·° ì‘ì„±, ë¬¸ì œ í’€ì´ ë“±ì—ì„œ ì ìˆ˜ íšë“  |
| ì˜í™” Frame í™•ëŒ€  |     detail/     | detail í˜ì´ì§€ì—ì„œ ì˜í™”ì— ëŒ€í•œ í”„ë ˆì„ í´ë¦­ì‹œ  Modalë¡œ í™•ëŒ€ ì¶œë ¥ |



## ğŸ“¦ Structure

![erd](README.assets/erd-7816882.png)

```
final-pjt
â”œâ”€â”€ accounts/
â”‚   â”œâ”€â”€ migrations
â”‚		â”‚		â””â”€â”€ ...
â”‚   â”œâ”€â”€ templates/accounts
â”‚		â”‚		â””â”€â”€ ...
â”‚   â””â”€â”€ static/accounts
â”‚				â””â”€â”€ ...
â”œâ”€â”€ movies/
â”‚   â”œâ”€â”€ migrations
â”‚		â”‚		â””â”€â”€ ...
â”‚   â”œâ”€â”€ templates/movies
â”‚		â”‚		â””â”€â”€ ...
â”‚   â””â”€â”€ static/movies
â”‚				â””â”€â”€ ...
â”œâ”€â”€ final-pjt/
â”‚		â””â”€â”€ ...
â”œâ”€â”€ staticfiles/static
â”‚   â”œâ”€â”€ css
â”‚		â”‚		â””â”€â”€ ...
â”‚   â”œâ”€â”€ favicon
â”‚		â”‚		â””â”€â”€ ...
â”‚   â”œâ”€â”€ images
â”‚		â”‚		â””â”€â”€ ...
â”‚   â”œâ”€â”€ videos
â”‚		â”‚		â””â”€â”€ ...				
â”‚   â””â”€â”€ ...
â”œâ”€â”€ templates
â”‚   â””â”€â”€ base.html
â”œâ”€â”€ .gitignore
â”œâ”€â”€ README.md
â”œâ”€â”€ db.sqlite3
â””â”€â”€ requirements.txt
```



## ğŸƒ íŒ€ì› ì •ë³´ ë° ì—…ë¬´ ë¶„ë‹´ ë‚´ì—­
#### ì†Œì†
* ##### SSAFY 6ê¸° ëŒ€ì „ 2ë°˜

#### ì´ë¦„
- ##### ê¹€ì£¼í˜¸

  - í´ëŸ¬ìŠ¤í„°ë§ / RGB Calculating / Tier / Quiz / DB / ì¿¼ë¦¬ ìµœì í™” / FE 

- ##### ì´ê±´í¬

  - ìŒì„±ì¸ì‹ / ë“œë¡œì‰ / Design / Quiz / DB / FE / ì¿¼ë¦¬ ìµœì í™” / ë°°í¬




## âš™ï¸ ê°œìš”

* ##### ëª©í‘œ ì„œë¹„ìŠ¤ êµ¬í˜„ ë° ì‹¤ì œ êµ¬í˜„ ì •ë„

  * 90%
    * ëª©í‘œ ì„œë¹„ìŠ¤ êµ¬í˜„
    * ëª©í‘œ ë””ìì¸ êµ¬í˜„
    * ì†ë„: -10%, ì¿¼ë¦¬ ìµœì í™”, Static ë° DB ê²½ëŸ‰í™” ì™„ë£Œí•˜ì˜€ì§€ë§Œ, ë“œë¡œì‰ì— í™œìš©ë˜ëŠ” Media Fileì— ëŒ€í•œ ê²½ëŸ‰í™”ê°€ ì´ë£¨ì–´ì§€ì§€ ì•ŠìŒ

* ##### ëª©ì°¨

  * Part 1, ê¹€ì£¼í˜¸
  * Part 2, ì´ê±´í¬
  * ë§ˆì¹˜ë©°





## ğŸƒ Part 1, ê¹€ì£¼í˜¸

> ê¸°ì¡´ì— ì˜ ì•Œë ¤ì§„ ì¶”ì²œ ì•Œê³ ë¦¬ì¦˜ê³¼ëŠ” ë‹¤ë¥¸ ìƒˆë¡œìš´ ë°©ë²•ì„ ì°¾ë‹¤ê°€, 'ìœ ì €ê°€ ê³ ë¥¸ ìƒ‰ì±„ë¡œ ì˜í™”ë¥¼ ì¶”ì²œí•´ ì£¼ëŠ” ì•Œê³ ë¦¬ì¦˜'ì„ êµ¬í˜„í•˜ê¸°ë¡œ í–ˆë‹¤.
>
> ë¬¼ë¡  ê·¸ëŸ¬í•œ ë°ì´í„°ë¥¼ ì œê³µí•´ì£¼ëŠ” ê³³ì€ ì°¾ê¸° í˜ë“¤ì—ˆê¸°ì—, ìš°ë¦¬ëŠ” ì§ì ‘ ì˜í™” ìƒ‰ì±„ ë°ì´í„°ë¥¼ ë§Œë“¤ê¸°ë¡œ í–ˆë‹¤.



### `ìƒ‰ì±„ ë°ì´í„° ë§Œë“¤ê¸°`

> ì‚¬ìš© í”„ë¡œê·¸ë¨: Visual Studio 2019
>
> ì‚¬ìš© ì–¸ì–´: C#(WPF)
>
> ì‚¬ìš© ë¼ì´ë¸ŒëŸ¬ë¦¬: OpencvSharp



#### ë¬´ì—‡ìœ¼ë¡œ ë§Œë“¤ ê²ƒì¸ê°€?

ë°ì´í„°ë¥¼ ë§Œë“¤ê¸°ì— ì•ì„œ, ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ì˜í™”ì˜ ìƒ‰ì±„ë¥¼ ë°›ì•„ì˜¬ ì§€ ìƒë‹¹íˆ ê³ ë¯¼í–ˆë‹¤.

ì²˜ìŒì—” ìƒ‰ì±„ë¥¼ ì œê³µí•´ì£¼ëŠ” APIê°€ ìˆì„ ê±°ë¼ ìƒê°í–ˆê³ , ì‹¤ì œë¡œ ê²€ìƒ‰ì–´ì— ì¡í˜”ì—ˆì§€ë§Œ ì‹¤ìƒì€ ë„˜ì–´ì˜¤ëŠ” ë°ì´í„°ê°€ ì—†ì—ˆë‹¤.

![image-20211123093357607](README.assets/image-20211123093357607.png)

> ìƒ‰ì±„ ë°ì´í„°ë¥¼ ì œê³µí•œë‹¤ê³  í–ˆìœ¼ë‚˜..



ê·¸ë˜ì„œ ì§ì ‘ ë§Œë“¤ì–´ë³´ìëŠ” ê²°ë¡ ì„ ë‚´ë ¸ë‹¤. ê·¸ëŸ¼ ë¬´ì—‡ìœ¼ë¡œ, ì–´ë–»ê²Œ ë§Œë“¤ ê²ƒì¸ê°€?

ìš°ì„  ì„¸ ê°€ì§€ì˜ ì•„ì´ë””ì–´ê°€ ë‚˜ì™”ë‹¤.



##### í¬ìŠ¤í„°ì—ì„œ ìƒ‰ì±„ ì¶”ì¶œ

- ì˜í™”ë¥¼ í•œì¥ì˜ ì´ë¯¸ì§€ë¡œ í‘œí˜„í•˜ëŠ” ë§Œí¼, í•´ë‹¹ ì˜í™”ë¥¼ ëŒ€í‘œí•œë‹¤ê³  ë³¼ ìˆ˜ ìˆìŒ

- ë°ì´í„° ì¶”ì¶œ ë§¤ìš° ë¹ ë¦„

- ê·¸ëŸ¬ë‚˜, ì˜í™”ì˜ ìƒ‰ì±„ì™€ í¬ìŠ¤í„°ì˜ ìƒ‰ì±„ê°€ ê°™ì„ ê²ƒì´ë¼ëŠ” ë³´ì¥ì´ ì—†ìŒ

  - êµ­ë‚´ í¬ìŠ¤í„°ëŠ” í˜„ë€í•œ ê¸€ê·€ì™€ í•´ë‹¹ ì˜í™”ì˜ ìˆ˜ìƒëª©ë¡ ë“± ì˜í™”ì—ì„œ ì£¼ëŠ” ìƒ‰ì˜ ëŠë‚Œì„ ì˜ ì‚´ë¦¬ì§€ ëª» í•œ ê²½ìš°ê°€ ë§ìŒ
  - í•´ì™¸ í¬ìŠ¤í„°ëŠ” ëŒ€ì²´ì ìœ¼ë¡œ ê´œì°®ìœ¼ë‚˜, íˆì–´ë¡œ ë¬´ë¹„ ë“± ì¼ë¶€ì—ì„œëŠ” ì˜í™”ì˜ ìƒ‰ì±„ë³´ë‹¤ ì£¼ì¸ê³µ ìºë¦­í„°ì˜ ìƒ‰ì„ ê°•ì¡°í•˜ëŠ” ê²½ìš°ê°€ ë§ìŒ

  

##### ì˜ˆê³ í¸ì—ì„œ ìƒ‰ì±„ ì¶”ì¶œ

- ì´ ë˜í•œ ì˜í™”ì˜ ëŠë‚Œì„ ì„ ì œê³µí•´ì£¼ëŠ” ë§Œí¼, í•´ë‹¹ ì˜í™”ë¥¼ ëŒ€í‘œí•œë‹¤ê³  ë³¼ ìˆ˜ ìˆìŒ
- ë°ì´í„° ì¶”ì¶œ ì˜¤ë˜ ê±¸ë¦¼
- ì˜í™”ì˜ ìƒ‰ì±„ì™€ ê°™ì„ ê²ƒì´ë¼ëŠ” ë³´ì¥ì´ ì—†ì§€ë§Œ, í¬ìŠ¤í„°ë³´ë‹¤ëŠ” í›¨ì”¬ ë§ì€ ë°ì´í„°ë¥¼ ì œê³µë°›ì„ ìˆ˜ ìˆìŒ



##### ë³¸í¸ì—ì„œ ìƒ‰ì±„ ì¶”ì¶œ

- ì˜í™” ê·¸ ìì²´ë¥¼ ë‹¤ìš´ë°›ì•„ í•´ë‹¹ ì˜í™”ì˜ ì™„ì „í•œ ìƒ‰ì±„ ë°ì´í„°ë¥¼ ë§Œë“œëŠ” ë°©ë²•
- ë°ì´í„° ì¶”ì¶œ ë§¤ìš° ì˜¤ë˜ ê±¸ë¦¼
- **ë¶ˆë²•ì ì¸ ê²½ë¡œë¡œ ì˜í™”ë¥¼ ë‹¤ìš´ë°›ì•„ ë°ì´í„°ë¥¼ ë§Œë“¤ì–´ì„  ì•ˆë¨**
  - ëŒ€ë¶€ë¶„ì˜ ì˜í™”ë“¤ì´ ìµœê·¼ ê°œë´‰ ë° ê°œë´‰ ì˜ˆì •ì´ì—ˆê¸° ë•Œë¬¸ì—, ë§Œë“¤ ìˆ˜ ìˆëŠ” ë°ì´í„°ëŠ” ì—†ë‹¤ê³  ë´ë„ ë¬´ë°©



ì´ëŸ¬í•œ ê³ ë¯¼ì„ ê±°ì¹œ ê²°ê³¼, ì˜ˆê³ í¸ì„ ì‚¬ìš©í•˜ìëŠ” ê²°ë¡ ì´ ë‚˜ì™”ë‹¤.

ì˜í™”ì˜ ì¼ë¶€ ì¥ë©´ì„ ë‹´ê³  ìˆìœ¼ë©°, ê³ ê°ë“¤ì—ê²Œ 'í•´ë‹¹ ì˜í™”ì˜ ì „ë°˜ì ì¸ ëŠë‚Œ'ì„ ì£¼ë„ë¡ ì„¤ê³„ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ìƒ‰ì±„ ë°ì´í„°ë¥¼ ë½‘ê¸°ì— ì ì ˆí•  ê²ƒì´ë¼ ìƒê°ë˜ì—ˆë‹¤.



#### ì–´ë–»ê²Œ ë§Œë“¤ ê²ƒì¸ê°€?

ì‚¬ìš©í•  ë°ì´í„°ëŠ” ì •í–ˆê³ , ì–´ë–»ê²Œ ë§Œë“¤ì§€ë¥¼ ê³ ë¯¼í–ˆë‹¤. ì˜ìƒì²˜ë¦¬ ê´€ë ¨ í”„ë¡œì íŠ¸ë¥¼ ì‹¸í”¼ ì´ì „ ë‹¤ë¤„ë³¸ ì ì´ ìˆì—ˆê¸°ì—, ì„¸ ê°€ì§€ ì •ë„ì˜ ê¸°ì¤€ ë‚´ì—ì„œ ë°©ë²•ë¡ ì„ ê²°ì •í•˜ê¸°ë¡œ í–ˆë‹¤.



##### ì˜¤ëœ ì‹œê°„ì´ ê±¸ë¦¬ë©´ ì•ˆëœë‹¤.

- í•´ë‹¹ ì‘ì—…ì€ ì¶”ì²œ ì•Œê³ ë¦¬ì¦˜ì„ ì œê³µí•˜ê¸° ìœ„í•œ ë°ì´í„° ì„ ë³„ë¡œ, ë‹¨ê¸°ê°„ì— ëë‚´ì•¼ í•œë‹¤. ë°°ë³´ë‹¤ ë°°ê¼½ì´ ì»¤ì§€ëŠ” ê²½ìš°ëŠ” ìˆì–´ì„  ì•ˆëœë‹¤.

##### ë‹¤ë£¨ê¸° ì‰¬ì›Œì•¼ í•œë‹¤.

- ë‚´ê²Œ ìˆì–´ í¸í•œ ë°©ë²•ìœ¼ë¡œ êµ¬ì„±ë˜ì–´ì•¼ ì¶”í›„ ë”°ë¡œ í”„ë¡œê·¸ë¨ì„ ì œì‘í•˜ê³  ë°°í¬í•  ë•Œë„ ë¬´ë¦¬ê°€ ì—†ì„ ë¿ë”ëŸ¬, ë°ì´í„° ìƒì„±ì˜ í”¼ë¡œë„ë¥¼ ìµœì†Œë¡œ ì¤„ì¼ ìˆ˜ ìˆë‹¤.

##### ì‘ë™ë°©ì‹ì˜ í†µì¼ì„±ì´ ìˆì–´ì•¼ í•œë‹¤.

- ì˜í™” ì˜ˆê³ í¸ë§ˆë‹¤ í¬ê¸°ì™€ ê¸¸ì´ê°€ ì œê°ê°ì´ë‹¤. í•˜ì§€ë§Œ í†µì¼ì„±ì´ ìˆëŠ” ë°©ë²•ì„ ìƒê°í•´ë‚¸ë‹¤ë©´, ì˜ˆì™¸ ì²˜ë¦¬ ë“±ì„ í•˜ì§€ ì•Šê³ ë„ ì¢‹ì€ ë°ì´í„°ë¥¼ ë½‘ì•„ë‚¼ ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.



ìˆ˜ë§ì€ ê³ ë¯¼ì„ í•œ ëì—, ë‚´ê²Œ ìµìˆ™í•˜ë©´ì„œë„ ì „ì— ë‹¤ë¤„ë³¸ ê²½í—˜ì„ ì‚´ë ¤ ë¹¨ë¦¬ ëë‚¼ ìˆ˜ ìˆì„ ë§Œ í•œ êµ¬ì¡°ì¸ C# WPF + OpencvSharpë¥¼ ì´ìš©í•˜ê¸°ë¡œ í–ˆë‹¤.



#### í”„ë¡œê·¸ë¨ êµ¬ì„±

visual studio 2019ë¥¼ ì‚¬ìš©í•˜ì—¬ wpf ë¹ˆ í”„ë¡œì íŠ¸ë¥¼ ë§Œë“  í›„, xamlì€ ê°„ë‹¨í•˜ê²Œ ë²„íŠ¼ì„ ë§Œë“¤ê³  í•´ë‹¹ ë²„íŠ¼ì´ ì œê³µí•  ì´ë²¤íŠ¸ë¥¼ ì½”ë“œë¹„í•˜ì¸ë“œì— ì ê¸°ë¡œ í–ˆë‹¤.



![image-20211123103730493](README.assets/image-20211123103730493.png)

ì´ì „ì— í–ˆë˜ í”„ë¡œì íŠ¸ë“¤ì²˜ëŸ¼ UIë¥¼ ê¾¸ë°€ ìƒê°ì€ í•˜ì§€ ì•Šì•˜ê¸°ì—, mvvm êµ¬ì¡°ë‚˜ ë°”ì¸ë”©ê°™ì€ ê±´ ì—¼ë‘í•˜ì§€ ì•Šì•˜ë‹¤. ì‹œê°„ì„ ìµœì†Œí•œìœ¼ë¡œ ì‚¬ìš©í•´ì•¼ í–ˆê¸° ë•Œë¬¸ì´ë‹¤.

nugetì„ ì‚¬ìš©í•´ OpencvSharpë¥¼ ì„¤ì¹˜í–ˆê³ , ì˜í™”ë¥¼ ì„ íƒí•  dialog ë“±ì„ ì²¨ë¶€í•˜ì˜€ë‹¤.

```c#
OpenFileDialog openFile = new OpenFileDialog();
openFile.DefaultExt = "video&image";
openFile.Filter = "video&image|*.mov;*.mp4;*.png;";
```



ì´í›„ ì˜í™” ì˜ˆê³ í¸ì„ ì„ íƒí•˜ë©´ ë§¤ í”„ë ˆì„ë§ˆë‹¤ í•œì¥ì”© matìœ¼ë¡œ ì˜®ê²¨ì™”ê³ , OpencvSharpì—ì„œ ì œê³µí•˜ëŠ” Kmeansë¥¼ ì´ìš©í•˜ì—¬ ë¹„ì§€ë„í•™ìŠµì¸ í´ëŸ¬ìŠ¤í„°ë§ì„ ìˆ˜í–‰í•´ í•´ë‹¹ í”„ë ˆì„ì—ì„œì˜ ëŒ€í‘œìƒ‰ 5ê°œë¥¼ ë½‘ì•„ í•˜ë‚˜ì˜ ë¦¬ìŠ¤íŠ¸ì— ê¸°ë¡í•˜ì˜€ë‹¤.

```C#
if (openFile.ShowDialog() == true)
{
    VideoCapture video = new VideoCapture(openFile.FileName);
    int length = video.FrameCount;
    int clustersCount = 5;
    int total_x = 1920;
    List<RGB> RGB_List = new List<RGB>();  // í•´ë‹¹ RGB í´ë˜ìŠ¤ëŠ” float 3ê°œë¡œ ì´ë£¨ì–´ì§
    RGB RGB_row;
    Mat columnVector;

    using (Mat src = new Mat(),
           samples = new Mat(),
           bestLabels = new Mat(),
           centers = new Mat())
    {
        int cnt = 0;
        while (true)
        {
            video.Read(src);

            if (src.Empty())
                break;  // ì˜ìƒì´ ëë‚  ë•Œê¹Œì§€ ë¬´í•œë°˜ë³µ

            Cv2.Blur(src, src, new OpenCvSharp.Size(15, 15));  // ë¸”ëŸ¬ë¡œ í”„ë ˆì„ì„ ë­‰ê°¬
            columnVector = src.Reshape(cn: 3, rows: src.Rows * src.Cols);  // ì°¨ì›ë³€ê²½
            columnVector.ConvertTo(samples, MatType.CV_32FC3);

            Cv2.Kmeans(  // í´ëŸ¬ìŠ¤í„°ë§ì„ ì‚¬ìš©
                data: samples,
                k: clustersCount,
                bestLabels: bestLabels,
                criteria:
                new TermCriteria(type: CriteriaTypes.Eps | CriteriaTypes.MaxIter, maxCount: 10, epsilon: 1.0),
                attempts: 3,
                flags: KMeansFlags.PpCenters,
                centers: centers);

            for (int idx = 0; idx < 5; idx++) 
            {
                RGB_row = new RGB(centers.At<float>(idx, 0), centers.At<float>(idx, 1), centers.At<float>(idx, 2));  // ê²°ê³¼ë¡œ ë‚˜ì˜¨ 5ê°œì˜ í”„ë ˆì„ ëŒ€í‘œìƒ‰ì„ ë¦¬ìŠ¤íŠ¸ì— ì €ì¥
                RGB_List.Add(RGB_row);
            }
            Console.WriteLine(cnt++ + "/" + length);
    ...
        }
    ...
    }
...
}
```



ê¸°ë¡í•œ RGB ê°’ë“¤ì„ í•˜ë‚˜ì˜ ì´ë¯¸ì§€ë¡œ ë³€í™˜í•´ì£¼ê¸° ìœ„í•´ ê²€ì€ìƒ‰ì˜ ë¹ˆ Matì„ í•˜ë‚˜ ë§Œë“¤ê³  ìƒ‰ì„ ì…í˜€ ë‚˜ê°”ë‹¤.

```c#
int total_y = RGB_List.Count / total_x;
Mat result = new Mat(50 * (total_y + 1), total_x, MatType.CV_8UC3, new Scalar(0, 0, 0));  // ì“°ë ˆê¸°ê°’ì´ ë“¤ì–´ê°€ëŠ” ê±¸ ë°©ì§€í•˜ê¸° ìœ„í•´ ê²€ì€ìƒ‰ìœ¼ë¡œ ì±„ì›Œë‘ 
for (int col = 0; col < RGB_List.Count; col++)
{
    int y = col / total_x;
    int x = col % total_x;
    var newPixel = new Vec3b  // ìˆœì„œëŠ” RGBê°€ ì•„ë‹Œ BGRì¸ ê²ƒì— ì£¼ì˜
    {
        Item0 = (byte)RGB_List[col].B, // B
        Item1 = (byte)RGB_List[col].G, // G
        Item2 = (byte)RGB_List[col].R // R
    };
    for (int row = 0; row < 50; row++)
    {
        result.Set(50 * y + row, x, newPixel);
    }
    Console.WriteLine(col + "/" + RGB_List.Count);
}
```



ê·¸ í›„ í•´ë‹¹ Matì„ ì´ë¯¸ì§€ë¡œ ì €ì¥í•˜ì˜€ë‹¤.

```C#
int lastIndex = openFile.FileName.LastIndexOf('.');
string filename = openFile.FileName.Substring(0, lastIndex) + ".png";
Cv2.ImWrite(filename, result);
MessageBox.Show("ì´ë¯¸ì§€ ì¶”ì¶œ ì™„ë£Œ");
```



![image-20211118161641205](README.assets/image-20211118161641205.png)

í”„ë¡œê·¸ë¨ì„ ì‘ë™ì‹œí‚¤ë©´ í”„ë ˆì„ì— ë”°ë¥¸ ì§„í–‰ìƒí™©ì´ ì½˜ì†”ì— ì‘ì„±ë˜ì–´ ë‚˜ì˜¨ë‹¤.



![Image Pasted at 2021-11-17 13-52](README.assets/bacord5.png)

ì˜ˆê³ í¸ì—ì„œ ë½‘ì•„ë‚¸ í”„ë ˆì„ë“¤ì˜ ëŒ€í‘œìƒ‰ì„ ê¸°ë¡í•œ í•œ ì¥ì˜ ì´ë¯¸ì§€(ì•ìœ¼ë¡œ ì´ëŸ¬í•œ ì´ë¯¸ì§€ë¥¼ ì»¬ëŸ¬ë°”ì½”ë“œë¼ ì¹­í•˜ê² ë‹¤).



ì˜í™” ì˜ˆê³ í¸ì„ ë‹¤ìš´ë°›ìœ¼ë©° ê³„ì†í•´ì„œ í”„ë¡œê·¸ë¨ì„ ëŒë ¸ë‹¤. ì˜ˆê³ í¸ì„ ë‹¤ìš´ë°›ëŠ” ê²ƒë„, í”„ë¡œê·¸ë¨ì„ ëŒë¦¬ëŠ”ê²ƒë„ êµ‰ì¥íˆ í”¼ê³¤í•œ ì¼ì´ì—ˆìœ¼ë‚˜ ë˜ë„ë¡ ë¹¨ë¦¬ ëë‚´ê¸° ìœ„í•´ ì‰´ í‹ˆ ì—†ì´ ì‘ì—…í–ˆë‹¤.

ì˜ˆê³ í¸ë“¤ì„ í•œ ë²ˆì— ì„ íƒí•´ì„œ ëª¨ë“  ì»¬ëŸ¬ë°”ì½”ë“œê°€ ì¶”ì¶œë  ë•Œê¹Œì§€ ëŒë¦¬ëŠ” ë°©ë²•ë„ ìƒê°í–ˆìœ¼ë‚˜, ì˜ˆì „ì— ë¹„ìŠ·í•œ ì‘ì—…ì„ í•˜ë‹¤ê°€ ë°ì´í„°ê°€ ê¼¬ì—¬ì„œ ì—‰ë§ì´ ëœ ê²½í—˜ì´ ìˆê¸°ì— ë‚´ê°€ ì¡°ê¸ˆ ê³ ìƒí•˜ë”ë¼ë„ í•˜ë‚˜ì”© ì§„í–‰í•˜ëŠ” ë°©ë²•ì„ íƒí–ˆë‹¤.

ì¤‘ê°„ì¤‘ê°„ í”„ë¡œê·¸ë¨ì´ ë‹¤ìš´ë˜ëŠ” ê²½ìš°ê°€ ìˆì—ˆë‹¤. ì˜ˆê³ í¸ì˜ ì½”ë± ì°¨ì´ ë“±ìœ¼ë¡œ Mat ë³€í™˜ì´ ë˜ì§€ ì•ŠëŠ” ë“¯ í–ˆë‹¤. ë‹¤ë¥¸ ì‚¬ì´íŠ¸ì—ì„œ ë‹¤ìš´ë°›ì•„ ì¬ì‹œì‘ì„ í•˜ê¸°ë„ í–ˆë‹¤.



ì˜í™” ë°ì´í„°ë¥¼ 100ê°œ ì €ì¥í•˜ê¸°ë¡œ í–ˆê¸° ë•Œë¬¸ì—, ì˜ˆê³ í¸ 100í¸ì—ì„œ ì»¬ëŸ¬ë°”ì½”ë“œ 100ê°œë¥¼ ì¶”ì¶œí–ˆë‹¤. ê·¸ ë’¤ì—” ì»¬ëŸ¬ë°”ì½”ë“œì—ì„œ ëŒ€í‘œìƒ‰ì„ ë½‘ì•„ ì˜í™”ì˜ ìƒ‰ì±„ íŒ”ë ˆíŠ¸ë¡œ ì§€ì •í•œ í›„, JsoníŒŒì¼ë¡œ ë³€í™˜í•˜ì—¬ DB ë°ì´í„° ì‘ì—…ì´ ìˆ˜ì›”í•´ì§€ë„ë¡ í–ˆë‹¤.

```c#
var jsonData = System.IO.File.ReadAllText(filePath);
var colorList = JsonConvert.DeserializeObject<List<Color>>(jsonData) ?? new List<Color>();
```



ê·¸ í›„ Kmeansë¡œ ëŒ€í‘œìƒ‰ 6ê°œë¥¼ ë½‘ì•˜ë‹¤.

ì˜í™” ì˜ˆê³ í¸ì€ ê¸´ë°•ê°ì´ë‚˜ í™”ë©´ì „í™˜ íš¨ê³¼ë¥¼ ì£¼ê¸° ìœ„í•´ ê²€ì€ í™”ë©´ì„ ë„ìš°ëŠ” ê²½ìš°ê°€ ë§ì•˜ë‹¤. ì´ë¥¼ ìœ„í•´ 6ê°œì˜ ëŒ€í‘œìƒ‰ ì¤‘, ê°€ì¥ ì–´ë‘ìš´ ëŒ€í‘œìƒ‰ì„ ì œì™¸í•˜ëŠ” ë°©ë²•ì„ íƒí–ˆë‹¤.

```c#
int[,] total_color = new int[6, 3];

int darkest_index = 0;
int darkest_value = 255 * 3;
for (int i = 0; i < 6; i++)
{
    total_color[i, 0] = (int)centers.At<float>(i, 0);
    total_color[i, 1] = (int)centers.At<float>(i, 1);
    total_color[i, 2] = (int)centers.At<float>(i, 2);
  
    // ê°€ì¥ ì–´ë‘ìš´ ìƒ‰ì„ ì§€ë‹Œ ëŒ€í‘œìƒ‰ì„ ì°¾ìŒ
    if (darkest_value > total_color[i, 0] + total_color[i, 1] + total_color[i, 2])
    {
        darkest_value = total_color[i, 0] + total_color[i, 1] + total_color[i, 2];
        darkest_index = i;
    }
}

// í•´ë‹¹í•˜ëŠ” ê°’ì„ 6ë²ˆì§¸ ëŒ€í‘œìƒ‰ìœ¼ë¡œ ë°”ê¿”ì¤Œ
total_color[darkest_index, 0] = total_color[5, 0];
total_color[darkest_index, 1] = total_color[5, 1];
total_color[darkest_index, 2] = total_color[5, 2];

colorList.Add(new Color()
              {
                  movie = openFile.FileNames[idx],
                  color_1_B = total_color[0, 0],
                  color_1_G = total_color[0, 1],
                  color_1_R = total_color[0, 2],
                  color_2_B = total_color[1, 0],
                  color_2_G = total_color[1, 1],
                  color_2_R = total_color[1, 2],
                  color_3_B = total_color[2, 0],
                  color_3_G = total_color[2, 1],
                  color_3_R = total_color[2, 2],
                  color_4_B = total_color[3, 0],
                  color_4_G = total_color[3, 1],
                  color_4_R = total_color[3, 2],
                  color_5_B = total_color[4, 0],
                  color_5_G = total_color[4, 1],
                  color_5_R = total_color[4, 2],
              });

// json ì—…ë°ì´íŠ¸
jsonData = JsonConvert.SerializeObject(colorList);
System.IO.File.WriteAllText(filePath, jsonData);
```



ì´ë ‡ê²Œ í•˜ì—¬ ì˜í™”ì˜ ìƒ‰ì±„ ë°ì´í„°ë¥¼ ìƒì„±í•˜ì˜€ë‹¤.



### `ì•Œê³ ë¦¬ì¦˜ êµ¬ì„± ë° ì›¹í˜ì´ì§€ ì‘ì—…`

> ìƒ‰ì±„ ì¶”ì²œ ì•Œê³ ë¦¬ì¦˜ ë° ê¸°íƒ€ ì•Œê³ ë¦¬ì¦˜ê³¼ ì›¹í˜ì´ì§€ ë””í…Œì¼ ì‘ì—…
>
> ë°ì´í„°ë¥¼ ìƒì„±í•˜ê³  ì˜¤ë‹ˆ í˜ì–´ì´ì‹  ê±´í¬ë‹˜ì´ ëŒ€ë¶€ë¶„ì˜ ì›¹ êµ¬ì¡°ë¥¼ ì¡ì•„ë†“ìœ¼ì‹  ìƒíƒœì˜€ë‹¤. ë‹¨ê¸°ê°„ì— ëë‚´ì‹¤ ì¤„ ëª°ëì–´ì„œ êµ‰ì¥íˆ ë†€ë¼ì› ê³ , í•´ë‹¹ ë°©í–¥ìœ¼ë¡œëŠ” ë„ì›€ë“œë¦° ê²Œ ì—†ì–´ì„œ ì£„ì†¡í–ˆë‹¤.



#### ìƒ‰ì±„ ì•Œê³ ë¦¬ì¦˜ êµ¬ì„±

ì§œì—¬ì§„ êµ¬ì¡°ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì•Œê³ ë¦¬ì¦˜ì„ ì‘ì„±í•˜ê¸°ë¡œ í–ˆë‹¤. ìš°ì„  ì˜í™” ìƒ‰ì±„ì— ëŒ€í•œ RGBëŠ” Json ë° shell_plusë¡œ ë“¤ì–´ê°€ ìˆëŠ” ìƒíƒœì˜€ë‹¤. ì´ì œ ì´ ê°’ë“¤ê³¼ ìœ ì €ê°€ ê³ ë¥¸ ìƒ‰ì„ ëŒ€ì¡°í•˜ì—¬ ì •ë ¬í•˜ë©´ ë˜ëŠ” ìƒíƒœì˜€ëŠ”ë°, ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ëŒ€ì¡°í•˜ë©° ì§„í–‰í•´ì•¼ í•  ì§€ ì¡°ê¸ˆ ë‚œê°í–ˆë‹¤.

ì•„ì´ë””ì–´ íšŒì˜ë¥¼ ì§„í–‰í•˜ë©° ë°©ë²•ë¡ ì„ ê³ ë¯¼í–ˆë‹¤.



##### 5ê°œì˜ ìƒ‰ì±„ í‰ê· ì„ êµ¬í•´ ëŒ€ì¡°?

- í‰ê· ì„ êµ¬í•œë‹¤ë©´ ê¸°ì¡´ ìƒ‰ì±„ì˜ ì˜ë¯¸ë¥¼ ìŠê²Œ ë  ìˆ˜ ìˆë‹¤.
- (40, 40, 40), (60, 60, 60)ê³¼ (0, 10, 20), (100, 90, 80)ì´ ì£¼ëŠ” ìƒ‰ì±„ëŠ” ë‹¤ë¥´ë‹¤.
- í‰ê· ì„ ë‚´ë²„ë¦¬ë©´ ìƒ‰ì±„ êµ¬ì¡°ê°€ ê¹¨ì–´ì§€ê³ , ì•ì„œ êµ¬í•œ ë°ì´í„°ë“¤ì´ ë¬´ìš©ì§€ë¬¼ ë  ìˆ˜ ìˆë‹¤.



##### ìœ ì €ì˜ ìƒ‰ê³¼ ê°€ì¥ í¡ì‚¬í•œ ìƒ‰ì„ ì§€ë‹Œ ìˆœìœ¼ë¡œ ì •ë ¬?

- ì•ì„œ êµ¬í•œ ìƒ‰ì±„ë“¤ì€ ìš°ì„ ìˆœìœ„ê°€ ì„¤ì •ë˜ì–´ ìˆì§€ ì•Šë‹¤. ì–´ë–¤ ìƒ‰ì´ ì˜í™”ì˜ ëŒ€ë¶€ë¶„ì„ ì°¨ì§€í•˜ëŠ”ì§€ëŠ” ëª¨ë¥¸ë‹¤. ê·¸ì € ë§ì´ ë‚˜ì˜¨ ìƒ‰ 5ê°œë¥¼ ìˆœì„œì—†ì´ ê³¨ëì„ ë¿.
- ìœ ì €ê°€ ì£¼í™©ìƒ‰ì„ ê³¨ëëŠ”ë°, ëŒ€ë¶€ë¶„ ë¶‰ì€ ìƒ‰ì±„ë¥¼ ì§€ë‹Œ ì˜í™”ë³´ë‹¤ ì£¼í™© í•˜ë‚˜ë§Œ ì¼ì¹˜í•˜ê³  ë‚˜ë¨¸ì§€ëŠ” ì „í˜€ ë‹¤ë¥¸ ìƒ‰ì±„ë¥¼ ì§€ë‹Œ ì˜í™”ê°€ ë§¨ ì•ìœ¼ë¡œ ì˜¤ë©´ ì´ëŠ” ìš°ë¦¬ì˜ ì˜ë„ì™€ ë§ì§€ ì•Šê²Œ ëœë‹¤.



##### ìœ ì €ì˜ ìƒ‰ê³¼ ì˜í™” ìƒ‰ì±„ì˜ distanceë¡œ ì •ë ¬?

- ìœ ì €ê°€ ê³ ë¥¸ ìƒ‰ê³¼ ì˜í™”ì˜ ìƒ‰ì„ í•˜ë‚˜ì”© ë¹„êµí•˜ë©° ê·¸ ì°¨ì´ë§Œí¼ ì ìˆ˜ë¥¼ ëŠ˜ë¦°ë‹¤.
- ì ìˆ˜ê°€ ê°€ì¥ ë‚®ê²Œ ë‚˜ì˜¨ ì˜í™”ëŠ” ìœ ì €ì˜ ìƒ‰ê³¼ distanceê°€ ê°€ì¥ ì§§ë‹¤.
- í•´ë‹¹ ë°©ì‹ì´ ë°ì´í„°ë„ ì œëŒ€ë¡œ ì‚´ë¦´ ìˆ˜ ìˆìœ¼ë©°, ìš°ë¦¬ê°€ ìƒìƒí•œ ë°©ì‹ê³¼ ê°€ì¥ ë‹®ì•„ìˆë‹¤.



ê·¸ë¦¬í•˜ì—¬ 3ë²ˆì§¸ ë°©ì‹ì„ íƒí•˜ê²Œ ë˜ì—ˆë‹¤.

```python
last_color_rgb = last_color.color[4:-1].split(", ")            # Users R, G, B list

for movie in movies:
    movie_color = movie.color_set.all()[0]
    score = math.sqrt(
        math.pow(int(last_color_rgb[0]) - int(movie_color.color_1_R), 2) +\
        math.pow(int(last_color_rgb[1]) - int(movie_color.color_1_G), 2) +\
        math.pow(int(last_color_rgb[2]) - int(movie_color.color_1_B), 2)
    ) + \
    math.sqrt(
        math.pow(int(last_color_rgb[0]) - int(movie_color.color_2_R), 2) +\
        math.pow(int(last_color_rgb[1]) - int(movie_color.color_2_G), 2) +\
        math.pow(int(last_color_rgb[2]) - int(movie_color.color_2_B), 2)
    ) + \
    math.sqrt(
        math.pow(int(last_color_rgb[0]) - int(movie_color.color_3_R), 2) +\
        math.pow(int(last_color_rgb[1]) - int(movie_color.color_3_G), 2) +\
        math.pow(int(last_color_rgb[2]) - int(movie_color.color_3_B), 2)
    ) + \
    math.sqrt(
        math.pow(int(last_color_rgb[0]) - int(movie_color.color_4_R), 2) +\
        math.pow(int(last_color_rgb[1]) - int(movie_color.color_4_G), 2) +\
        math.pow(int(last_color_rgb[2]) - int(movie_color.color_4_B), 2)
    ) + \
    math.sqrt(
        math.pow(int(last_color_rgb[0]) - int(movie_color.color_5_R), 2) +\
        math.pow(int(last_color_rgb[1]) - int(movie_color.color_5_G), 2) +\
        math.pow(int(last_color_rgb[2]) - int(movie_color.color_5_B), 2)
    )
    res_movies.append([movie, int(score)])
```

> ì½”ë“œë¡œ ë³´ë©´ ì¡°ê¸ˆ ì–´ì§€ëŸ¬ìš¸ ìˆ˜ ìˆìœ¼ë‚˜, ìˆ˜ì‹ìœ¼ë¡œ ë³´ë©´ ë³„ ê²ƒ ì•„ë‹Œ ëª¨ì–‘ìƒˆë‹¤.



ì´í›„ í•´ë‹¹ ê°’ë“¤ì„ ì‚¬ìš©í•˜ì—¬ ìœ ì €ê°€ ê³ ë¥¸ ìƒ‰ê³¼ ì˜í™”ì˜ ìƒ‰ì±„ê°€ ê°€ì¥ ë¹„ìŠ·í•œ ì˜í™” ìˆœìœ¼ë¡œ ì •ë ¬í•˜ì—¬ í™”ë©´ì— ë„ì›Œì£¼ëŠ” ë°©ë²•ì„ íƒí–ˆë‹¤.

```python
res_movies.sort(key= lambda x: x[1])
```



![image-20211123114402946](README.assets/image-20211123114402946.png)

> íŒŒë€ìƒ‰ì„ ê³¨ëì„ ë•Œì˜ í™”ë©´. ëŒ€ë¶€ë¶„ íŒŒë€ ìƒ‰ì±„ ì˜í™”ì¸ ì˜í™”ê°€ ë§¨ ìœ„ë¡œ ë‚˜ì˜¤ê²Œ ëœë‹¤.



![image-20211123115001045](README.assets/image-20211123115001045.png)

> ë°˜ëŒ€ë¡œ ë¶‰ì€ ìƒ‰ì„ ê³¨ëì„ ë•Œì˜ í™”ë©´.



#### ì»¬ëŸ¬ë°”ì½”ë“œ modalë¡œ ê°•ì¡°

ë©”ì¸í™”ë©´ì—ì„œëŠ” ì»¬ëŸ¬ë°”ì½”ë“œë¥¼ ì¼ì •í•œ í¬ê¸°ì— ë§ê²Œ ë³´ì—¬ì£¼ê¸° ë•Œë¬¸ì—, ì „ì²´ì ì¸ ì»¬ëŸ¬ë°”ì½”ë“œì˜ êµ¬ì¡°ë¥¼ ì•Œê¸° í˜ë“¤ë‹¤. detailì—ì„œëŠ” ì¡°ê¸ˆ í¬ê²Œ ë³´ì—¬ì£¼ê¸´ í•˜ì§€ë§Œ, ë­”ê°€ ìœ ì €ì—ê²Œ í™•ì‹¤íˆ ë³´ì—¬ì£¼ê³  ì‹¶ì—ˆë‹¤. ì˜í™” ìƒ‰ì±„ë¥¼ ê·¸ëƒ¥ ë½‘ì•˜ë‹¤ëŠ” ê²ƒì´ ì•„ë‹Œ, í•˜ë‚˜ì˜ ì¦ê±°í’ˆì´ì ê²°ê³¼ë‹ˆê¹Œ.



ìš°ì„  baseì— modalê³¼ js ì˜ ìœ„ì¹˜ì— blockì„ ì¡ì•˜ë‹¤. modalì€ í•´ë‹¹ ì›¹ì„ ì ì‹œ ë¹„í™œì„±í™”í•˜ê³  modalì´ í™œì„±í™”ë˜ëŠ” êµ¬ì¡°ì¸ë°, modalì´ ì›¹ êµ¬ì¡° ì¤‘ ì•ˆìª½ì— ìœ„ì¹˜í•  ê²½ìš° ì›¹ê³¼ modal ë‘˜ë‹¤ ë¹„í™œì„±í™”ê°€ ë˜ì–´ ìƒˆë¡œê³ ì¹¨ì´ ì•„ë‹ˆë©´ modalì„ ëŒ ìˆ˜ ì—†ê²Œë” ë˜ì–´ë²„ë ¸ë‹¤. ì´ëŠ” ì˜ˆì „ pjt03ì„ ì§„í–‰í•  ë•Œì™€ ê°™ì€ ë¬¸ì œì˜€ë‹¤. ê·¸ë ‡ê¸°ì— ì˜ˆì „ì²˜ëŸ¼ modalì˜ ìœ„ì¹˜ë¥¼ ìˆ˜ì •í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì„ ë°”ë¡œ ì•Œì•˜ë‹¤.

ë˜í•œ ì»¬ëŸ¬ë°”ì½”ë“œë¥¼ í´ë¦­í–ˆì„ ë•Œ ì–»ì–´ì§€ëŠ” ë°ì´í„°ëŠ” ì›¹ ì•ˆìª½ì— ìœ„ì¹˜í•˜ëŠ”ë°, ì´ ë°ì´í„°ë¥¼ ë°”ê¹¥ìª½ì˜ modalê¹Œì§€ ì „ë‹¬í•´ì£¼ë ¤ë©´ jsê°€ ê°€ì¥ ê°„í¸í•œ ë°©ë²•ì´ë¼ ìƒê°í•´ í•´ë‹¹ êµ¬ë¬¸ì„ ì‘ì„±í•˜ì˜€ë‹¤.

```django
{% block context %}
<div class="d-flex justify-content-center align-items-center" style="height:100px;" data-toggle="modal" data-target="#imagemodal">
            <img src="{{color.color_url}}" alt="" class="h-75 w-100" id="color_url">
          </div>
...
{% endblock context %}

{% block modal %}
<div class="modal" id="imagemodal">
  <div class="modal-dialog" style="max-width: 80%; vertical-align: middle;">
    <div class="modal-content" style="border-radius: 30px; background-color: rgba(255,255,192,0.1); backdrop-filter: blur(10px); box-shadow: 2px 7px 15px 8px rgba(0,0,0,0.3);">
      
      <!-- Modal body -->
      <div class="modal-body">
        <img src="" alt="">
      
    </div>
  </div>
</div>
{% endblock modal %}'

{% block js %}
  <script>
    const color_url = document.querySelector('#color_url')
    const src = color_url.getAttribute('src')
    const imagemodal = document.querySelector('#imagemodal')
    const color_barcode = imagemodal.querySelector('.modal-body img')
    color_url.addEventListener('click', function(event) {
      color_barcode.src = src
    })
  </script>
{% endblock js %}
```



![image-20211123133120638](README.assets/image-20211123133120638.png)

> ë°”ì½”ë“œë¥¼ í´ë¦­í•˜ë©´ í¬ê²Œ ë³¼ ìˆ˜ ìˆê²Œë” modalì„ ì‘ì„±



#### ìƒ‰ ê¸°ë¡ í´ë¦­í•˜ë©´ ìµœì‹  íƒìƒ‰ìœ¼ë¡œ ì˜¬ë ¤ ë³´ì—¬ì£¼ê¸°

ë°”ë¡œ ìœ„ì˜ ì´ë¯¸ì§€ ì™¼ìª½ì„ ìì„¸íˆ ë³´ë©´, ìœ ì €ì˜ ìƒ‰ ì„ íƒ ê¸°ë¡ì´ ìˆë‹¤. ë§Œì•½ ìœ ì €ê°€ ì € ìƒ‰ì— ëŒ€í•œ ê°’ì„ ë‹¤ì‹œ ë³´ê³  ì‹¶ì–´í•œë‹¤ë©´? ê³¼ì—° ì˜ˆì „ê³¼ ë˜‘ê°™ì€ RGBë¥¼ ì™„ë²½íˆ ê³ ë¥¼ ìˆ˜ ìˆì„ê¹Œ? í•˜ëŠ” ìƒê°ì— 'ê³¼ê±° ê¸°ë¡ì„ ëˆ„ë¥´ë©´ ë‹¤ì‹œ í•œ ë²ˆ íƒìƒ‰'í•´ì£¼ëŠ” ì‹œìŠ¤í…œì„ êµ¬ì„±í•˜ì˜€ë‹¤.



ë¡œì§ ìì²´ëŠ” ê°„ë‹¨í•  ìˆ˜ ìˆìœ¼ë‚˜, í˜„ì¬ì˜ ë‹¤ë¥¸ ì•Œê³ ë¦¬ì¦˜ êµ¬ì¡°ë“¤ì„ ê¹¨ëœ¨ë¦¬ì§€ ì•ŠëŠ” ë°©í–¥ìœ¼ë¡œ ì‘ì„±í•´ì•¼ í–ˆë‹¤. ìš°ì„  ìƒ‰ ì¶”ì²œ ì•Œê³ ë¦¬ì¦˜ì€ ìœ ì €ì˜ ìƒ‰ì„ ë°›ì•„ ê°€ì¥ ìµœê·¼ì— ê³ ë¥¸ ê°’ì„ ê¸°ì¤€ìœ¼ë¡œ ë³´ì—¬ì£¼ëŠ”ë°, ê·¸ë ‡ë‹¤ë©´ ìš°ë¦¬ì˜ ë¡œì§ì€ 'ì„ íƒí•œ ê°’ì„ ê°€ì¥ ìµœê·¼ ê°’ìœ¼ë¡œ ì˜®ê¸´ë‹¤'ë¡œ í˜ëŸ¬ê°€ì•¼ í–ˆë‹¤.

ìš°ì„  í•­ëª©ì„ ëˆŒë €ì„ ë•Œ í•´ë‹¹í•˜ëŠ” ìƒ‰ ê°’ì„ ì•Œì•„ë³´ê¸° ìœ„í•´ jsë¥¼ ì´ìš©í•˜ì—¬ ì½˜ì†”ì°½ì— ì°ì–´ ë³´ì•˜ë‹¤. ë‹¤í–‰íˆ backgroundcolorë¡œ ë“¤ê³  ìˆëŠ” ê²ƒì´ í™•ì¸ë˜ì—ˆë‹¤.

ë‹¤ìŒì€ í•´ë‹¹ í•­ëª© ë°‘ì— aíƒœê·¸ë¥¼ ë§Œë“¤ì–´ ìš°ë¦¬ê°€ ì›í•˜ëŠ” í•¨ìˆ˜ë¡œ ì´ë™ì‹œì¼œ ì£¼ê¸°ë¡œ í–ˆë‹¤.

í•¨ìˆ˜ëŠ” ê°„ë‹¨í•˜ê²Œ ì¸ìë¡œ rgb ë°ì´í„°ë¥¼ ë°›ì•„ ê°€ì¥ ìµœê·¼ê°’ìœ¼ë¡œ ì˜®ê²¨ì£¼ëŠ” ë°©ë²•ì„ ì‚¬ìš©í•˜ì˜€ë‹¤.

```python
def usercolor_update(request, rgb):
    colors = request.user.usercolorrecord_set.all()
    for i in range(len(colors)):
        if colors[i].color == rgb:
            colors[i].delete()
            break
    UserColorRecord.objects.create(user=request.user, color=rgb)  # Color Push
    return redirect('movies:index', 1)
```



í•˜ì§€ë§Œ ì´ëŠ” ì„œë²„ ê°’ì„ ë°”ê¾¸ëŠ” í–‰ìœ„ì´ë¯€ë¡œ, postë¡œ ì ‘ê·¼í•˜ëŠ” ê²ƒì´ ì˜³ì€ ì„ íƒì´ì—ˆë‹¤. aíƒœê·¸ë¥¼ ì—†ì• ê³  formì„ êµ¬ì¶•í•œ ë’¤ì—, ë‚´ë¶€ ë²„íŠ¼ì„ ë§Œë“¤ì–´ì„œ ê°’ì„ ë°˜í™˜í•˜ëŠ” êµ¬ì¡°ë¡œ ë°”ê¾¸ì—ˆë‹¤.

```django
<form action="{% url 'movies:usercolor_update' color.color %}" method="POST">
    {% csrf_token %}
    <button style="width: 100%; height: 100%; background-color: transparent; background-repeat: no-repeat; border: none; cursor: pointer; overflow: hidden; outline: none;"/>
</form>
```



ëŒ€ë¶€ë¶„ì˜ ì‘ì—…ì„ ëë‚´ê³  ì¿¼ë¦¬ ìµœì í™”ë¥¼ ì§„í–‰í–ˆë‹¤. ìƒ‰ì±„ ì¶”ì²œë§Œ í•´ë„ ì¿¼ë¦¬ê°€ 400ê°œê°€ëŸ‰ì´ì—ˆë‹¤. í•´ë‹¹ ì¶”ì²œë“¤ì€ ëª¨ë‘ 'ìœ ì €ê°€ ë³„ì ì„ ë‚¨ê¸´ ì˜í™”ë¥¼ ì¶”ì²œí•˜ì§€ ì•ŠìŒ'ì„ ê¸°ë°˜ìœ¼ë¡œ ë˜ì–´ì ¸ ìˆì—ˆê¸° ë•Œë¬¸ì—, ì´ ë¶€ë¶„ë¶€í„° í•´ê²°í•´ì•¼ í–ˆë‹¤.

```python
movies = []
for movie in temp_movies:
    for comment in movie.comments.all():
        if request.user == comment.user:
            break
        else:
            for review in movie.reviews.all():
                if request.user == review.user:
                    break
                else:
                    movies.append(movie)
```

> ê¸°ì¡´ ì½”ë“œ. forë¬¸ê³¼ ì—°ê³„ë˜ì–´ ìˆì–´ ì¿¼ë¦¬ë¥¼ ê³„ì† ë°›ì•„ì˜¤ëŠ” êµ¬ì¡°ì˜€ë‹¤.



ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ forë¬¸ê³¼ ì—­ì°¸ì¡°ë¥¼ ê°™ì´ ë‘ëŠ” ê²Œ ì•„ë‹Œ, ì¿¼ë¦¬ë¥¼ í•„í„°ë¡œ ì œí•œí•˜ì—¬ ë°›ì•„ì˜¨ í›„ forë¬¸ìœ¼ë¡œ í•´ë‹¹ ìœ ì €ê°€ ë¦¬ë·° í˜¹ì€ í•œì¤„í‰ì„ ë‚¨ê¸´ ì˜í™”ì˜ pkê°’ì„ setìœ¼ë¡œ ì •ë¦¬í•˜ì˜€ë‹¤. ê·¸ í›„ ì˜í™” ëª©ë¡ì„ ë°›ì•„ì˜¬ ë•Œ ì œì™¸í•  ëª©ë¡ìœ¼ë¡œ ë„£ì–´ ì£¼ì—ˆë‹¤.

```python
already_watched_movies = set()

users_moviecomments = MovieComment.objects.filter(user=request.user.pk).values('movie')
for users_moviecomment in users_moviecomments:
    already_watched_movies.add(users_moviecomment['movie'])

users_reviews = Review.objects.filter(user=request.user.pk).values('movie')
for users_review in users_reviews:
    already_watched_movies.add(users_review['movie'])
    
movies = Movie.objects.exclude(id__in=already_watched_movies)
```



ìœ„ ì½”ë“œ ì´í›„ ì¿¼ë¦¬ê°€ ì•½ 200ê°œë¡œ, ì ˆë°˜ ê°€ëŸ‰ì´ ê°ì†Œí•˜ëŠ” íš¨ê³¼ë¥¼ ë‚³ì•˜ë‹¤.

ê·¸ëŸ¬ë‚˜ ì•„ì§ ì ì€ ìˆ˜ì˜ ì¿¼ë¦¬ëŠ” ì•„ë‹ˆì—ˆê¸° ë•Œë¬¸ì—, ì˜í™” ë°ì´í„°ë¥¼ ë°›ì•„ì˜¬ ë•Œ í•´ë‹¹í•˜ëŠ” ì˜í™”ì˜ ìƒ‰ì±„ ë°ì´í„°ê¹Œì§€ ë“¤ê³ ì˜¬ ìˆ˜ ìˆë„ë¡ í–ˆë‹¤.

```python
movies = Movie.objects.exclude(id__in=already_watched_movies).prefetch_related('color_set', 'comments')
```

ì†¡ìˆ˜ì‹  ì¿¼ë¦¬ 8ê°œ, í•œìë¦¬ ìˆ˜ë¡œ ì¤„ì–´ë“œëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤.



## ğŸƒ Part 2, ì´ê±´í¬

> SSAFY 1í•™ê¸°ì˜ ë§ˆë¬´ë¦¬, SSAFYì—ì„œ ì²˜ìŒí•˜ëŠ” í”„ë¡œì íŠ¸,
>
> ì˜í•˜ê³  ì‹¶ì—ˆë‹¤. ì›í•˜ëŠ” ëª¨ë“  ê²ƒì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ ì§‘ì¤‘í–ˆë‹¤.



### `ìŒì„±ì¸ì‹`

> ê¸°ì¡´ì—ëŠ” ë„¤ì´ë²„, ì¹´ì¹´ì˜¤ ë‘˜ ì¤‘ í•˜ë‚˜ì˜ APIë¥¼ ì‚¬ìš©í•´ì„œ Axios, Promise ë°©ì‹ìœ¼ë¡œ API / Django View 2ê°œì™€ í†µì‹ í•˜ì—¬ ë¡œì§ì„ ì²˜ë¦¬í•˜ë ¤ê³  êµ¬ìƒ
>
> í•˜ì§€ë§Œ, IEì™€ Chromeì—ì„œ ë™ì‘í•˜ëŠ” Web Speech APIì˜ ìŒì„±ì¸ì‹ ì‹ ë¢°ë„(í•œêµ­ì–´, 92%)ì„ í™•ì¸ í›„ í•´ë‹¹ API ì‚¬ìš©ì— ì ‘ê·¼



> CSR = Naver CLOVA Speech Recognition, K_TTS = Kakao Speech-to-Text system, WSA = Web Speech API



![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-11-25 á„‹á…©á„’á…® 12.48.59](README.assets/mdn.png)

#### Web Speech API ì„ ì •

* í•œêµ­ì–´ ì‹ ë¢°ë„ ìˆœì€ CSR > K_TTS > Web Speech API

* ì²˜ë¦¬í•´ì•¼ í•˜ëŠ” ë¡œì§ìˆœì„œëŠ”

  * CSR, K_TTSì˜ ê²½ìš°,
    * Template(ì‚¬ìš©ì ìŒì„± ë…¹ìŒ) > Axios(JS, íŒŒì¼ë¡œ ë³€í™˜ í›„ ì „ì†¡) > CSR, K_TTS(ë°ì´í„° ì²˜ë¦¬í›„ Response) > Axios(ë°ì´í„° ìˆ˜ì‹ ) > Django View(ë°ì´í„° ì „ì†¡) > Django View(ë°ì´í„° ì²˜ë¦¬ í›„ Response) > Axios(ì‘ì—… í›„ Templateì²˜ë¦¬)
  * WSAì˜ ê²½ìš°,
    * ì‚¬ìš©ì ìŒì„± ë…¹ìŒ(Template) > WSA(ë°”ë¡œ ì²˜ë¦¬ í›„ í…ìŠ¤íŠ¸ ì¶”ì¶œ í›„ ì „ì†¡)  > Django View(ë°ì´í„° ì²˜ë¦¬ í›„ Response) > Axos(ì‘ì—… í›„ Templateì²˜ë¦¬)

  ì•ˆ ê·¸ë˜ë„ ë§ì€ ë°ì´í„°ê°€ ì—…ë¡œë“œ ë˜ì–´ì•¼í•˜ê³ , í†µì‹ ë„ ë§ì´ í•˜ëŠ” ì‚¬ì´íŠ¸ì—ì„œ CSR, K_TTS ë³´ë‹¤ëŠ” WSAê°€ í›¨ì”¬ ê°€ë²¼ìš¸ ê²ƒì´ë¼ ì˜ˆì¸¡

* êµ¬í˜„ ì‚¬ì´íŠ¸ì—ì„œ í•„ìš”í•œ ê²ƒì€ ì–´ëŠì •ë„ì˜ ì¸ì‹ë¥  ì´ìƒ

  ìŒì„±ì¸ì‹ ì²˜ë¦¬ê°€ ëª©ì ì¸ ì‚¬ì´íŠ¸ê°€ ì•„ë‹ˆë©°, ì²˜ë¦¬í•´ì•¼í•˜ëŠ” ìš”ì²­ì´ ë§ì§€ ì•Šì•˜ë‹¤. ë”°ë¼ì„œ WSAì˜ ì‹ ë¢°ë„ 92%ëŠ” ì¶©ë¶„í•˜ë‹¤ê³  íŒë‹¨



![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-11-25 á„‹á…©á„’á…® 12.58.12](README.assets/voice.png)



#### HTML - Modal ì´ìš©, íŒì—… í˜¸ì¶œ

ë…¹ìŒ ì•„ì´ì½˜ / ì •ì§€ ì•„ì´ì½˜ ê¸°ì¤€ìœ¼ë¡œ ë…¹ìŒ ì‹œì‘ / ì •ì§€ ë° ë¡œì§ ì‹œì‘ì„ Flag ì²˜ë¦¬

> ì²˜ë¦¬ë§ˆë‹¤ ì•„ì´ì½˜ ë° Answer Text ë³€ê²½

```html
<div>
  <h4 id="voiceText"> ìŒì„±ì„ ê¸°ë‹¤ë¦¬ê³  ìˆì–´ìš”...</h4>
  <h4 class="d-none" id="voiceAnswer" > ì•Œê² ì–´ìš”, ì§€ê¸ˆ ë°”ë¡œ ì‹¤í–‰í• ê²Œìš”.</h4>
</div>

<div class="modal-footer">
  <button id="voiceBtn" type="button" class="btn btn-danger">
    <i class="fas fa-microphone-alt"></i>
  </button>
</div>
```



#### WebRecognitionAPI & Axios & Python

* CDN - Webkit ì•ˆì— ë‚´ì¥

* Instance - new webkitSpeechRecognition

* í…ìŠ¤íŠ¸ ì¶”ì¶œ - Instance 'result' ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ, event['results']ì˜ index 0

* í…ìŠ¤íŠ¸ ì¶”ì¶œ í›„ ë¡œì§
  * voice_processë¡œ Axios ìš”ì²­ 
  * vocie_process ì²˜ë¦¬ í›„ Response
  * Axiosì—ì„œ jsë¡œ template ì¡°ì •

##### Voice Recognition Script

```javascript
{% comment %} ìŒì„±ì¸ì‹ {% endcomment %}
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

  <script>
    // Required Definition
    const voiceBtn = document.querySelector('#voiceBtn')
    const voiceText = document.querySelector('#voiceText')
    const processURL = '/movies/voice_process/'
    const voiceAnswer = document.querySelector('#voiceAnswer')

    let speech = new webkitSpeechRecognition // Voice Recording Tool
    let flag = true // start|stop flag

    voiceBtn.addEventListener('click', function () {
      if (flag) {
        speech.start()
        voiceText.innerText = "ë“£ê³  ìˆì–´ìš”..."
        voiceBtn.innerHTML = '<i class="fas fa-stop" style="font-size:35px;"></i>'
        voiceAnswer.classList.add('d-none')
        flag = false
      } else {
        speech.stop()
        voiceBtn.innerHTML = '<i class="fas fa-microphone-alt" style="font-size:35px;"></i>'
        flag = true
        
        // Connecting to voice_process in View
        axios({
          method: 'GET',
          url: processURL,
          params: {
            data: voiceText.textContent,
          }
        })
          .then(function (response) {
            const res = response.data.res // Number for Recognition
            if (res != 0 && res <= 3) {
                // href to Main by Sorting
              voiceAnswer.classList.remove('d-none')
              voiceAnswer.innerText = "ì•Œê² ì–´ìš”, ë°”ë¡œ ì‹¤í–‰í• ê²Œìš”."
              setTimeout(function() {
                window.location.href = `/movies/index/${res}`
              }, 1000);  
            } else if (res >= 4) {
              if (res == 4) {
                // Search
                let query = response.data.query
                const searchInput = document.querySelector('#searchInput')
                const searchButton = document.querySelector('#searchButton')
                searchInput.value = query
                voiceAnswer.classList.remove('d-none')
                voiceAnswer.innerText = "ì•Œê² ì–´ìš”, ë°”ë¡œ ì‹¤í–‰í• ê²Œìš”."
                setTimeout(function() {
                  searchButton.click()
                }, 1000);
              } else if (res == 5) {
                // Click BackBtn
                voiceAnswer.classList.remove('d-none')
                voiceAnswer.innerText = "ì•Œê² ì–´ìš”, ë°”ë¡œ ì‹¤í–‰í• ê²Œìš”."
                setTimeout(function() {
                  let backTag = document.querySelector('#backTag')
                  backTag.click()
                }, 1000);
              } else if (res == 6) {
                // About UserInfo Update
                voiceAnswer.classList.remove('d-none')
                voiceAnswer.innerText = "ì•Œê² ì–´ìš”, ë°”ë¡œ ì‹¤í–‰í• ê²Œìš”."
                setTimeout(function() {
                window.location.href = '/accounts/logout'
              }, 1000);
              }
            } else {
              voiceAnswer.classList.remove('d-none')
              voiceAnswer.innerText = "í•´ë‹¹ ì„œë¹„ìŠ¤ëŠ” ì¤€ë¹„ì¤‘ì…ë‹ˆë‹¤."
            }
          })
        }})
    
    // Recording Response Tracking
    speech.addEventListener("result", function (event) {
      const { transcript } = event["results"][0][0]
      voiceText.innerText = `"${transcript}"`
    })
  </script>
```

#### 

##### voice_process

```python
# movies/views.py

def voice_process(request):
    data = request.GET['data']
    responsable = {"ë©”ì¸": 1, "ë§¤ì¸": 1, "ìƒ‰ì²´": 1, "ìƒ‰ì±„": 1, "í‰ì ": 2, "ìµœì‹ ": 3, "ê²€ìƒ‰": 4, "ë’¤ë¡œ":5, "ë¡œê·¸": 6}
    res, query = 0, ""
    
    for key, value in responsable.items():
        if key in data:
            if key == "ê²€ìƒ‰":
                query = str(data[1:data.index("ê²€ìƒ‰")])
            res = value
            break
        
    context = {
        'res' : res,
        'query' : query,
    }
    return JsonResponse(context)
```





### `ë“œë¡œì‰`

> ì‚¬ìš©ì ë¡œì»¬ì— ì €ì¥í•˜ì§€ ì•Šê³  ë°ì´í„°ë¥¼ ë°”ë¡œ ì „ì†¡í•˜ê¸° ìœ„í•´ Blob ë°ì´í„° ë³€í™˜ í›„, FormData ìƒì„± í›„ Views.py ì²˜ë¦¬, Json Response, Axios Promise ë™ì‘



##### ê·¸ë¦¼íŒ

* https://github.com/shlee0882/painting-js ì´ìš© ë° ì‘ìš©
* ì‚¬ìš©ìê°€  ê·¸ë¦´ ìˆ˜ ìˆëŠ” ì»¬ëŸ¬ëŠ” ì˜í™”ì˜ ì»¬ëŸ¬ ìƒ‰ìƒìœ¼ë¡œ í•œì •

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-11-25 á„‹á…©á„’á…® 1.19.55](README.assets/draw.png)



##### HTML - Modal ì´ìš©, íŒì—… í˜¸ì¶œ

ìŠ¤ì¼€ì¹˜ë¶ ì—´ê¸° ë²„íŠ¼ì„ í†µí•´ ê·¸ë¦¼íŒ display í† ê¸€

> í•´ë‹¹ flagë¡œ ê·¸ë¦¼ ë°ì´í„° ì—†ì„ ê²½ìš° ê·¸ë¦¼ì´ ì—†ëŠ” ê²ƒìœ¼ë¡œ ì²˜ë¦¬

```html
<div class="content-section mt-3">
  <div class="app-card mt-5">
    <button style="background: none; border:none;" id="drawBtn">
      <h1 style="color:white;">ìŠ¤ì¼€ì¹˜ë¶ ì—´ê¸°</h1>
    </button>
  </div>
</div>

<div class="content-section d-none" id="drawWindow">
  <div class="app-card mt-3">
    <div class="row d-flex justify-content-center align-items-center">
      <canvas id="drawCanvas" class="canvas col-6" style="opacity: 0.8;"></canvas>
      <div class="controls col-5">
        <div class="controls__range">
          <input type="range" id="jsRange" min="0.1" max="10.0" value="5.0" step="0.1" style="width:200"/>
        </div>
        <!-- div.controls__btns>button#jsMode+button#jsSave -->
        <div class="controls__btns">
          <button id="jsMode" style="opacity: 0.8;">íœ</button>
        </div>
        <div class="controls__colors" id="jsColors">
          {% for color in movie.color_set.all %}
          <div class="controls__color jsColor" style="background-color: rgb({{color.color_1_R}},{{color.color_1_G}},{{color.color_1_B}});"></div>
          <div class="controls__color jsColor" style="background-color: rgb({{color.color_2_R}},{{color.color_2_G}},{{color.color_2_B}});"></div>
          <div class="controls__color jsColor" style="background-color: rgb({{color.color_3_R}},{{color.color_3_G}},{{color.color_3_B}});"></div>
          <div class="controls__color jsColor" style="background-color: rgb({{color.color_4_R}},{{color.color_4_G}},{{color.color_4_B}});"></div>
          <div class="controls__color jsColor" style="background-color: rgb({{color.color_5_R}},{{color.color_5_G}},{{color.color_5_B}});"></div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
</div>
```



##### Draw Script

* Reference - https://github.com/shlee0882/painting-js)
* Reference ê·¸ëŒ€ë¡œ ì´ìš©, ê·¸ë¦¼íŒì„ ìƒì„±í•˜ëŠ” ê²ƒì´ ëª©í‘œê°€ ì•„ë‹ˆì˜€ìœ¼ë¯€ë¡œ ì˜¤í”ˆì†ŒìŠ¤ CSS í™œìš©ê³¼ ê°™ë‹¤ê³  íŒë‹¨



##### Blob ë°ì´í„° ë³€í™˜ & FormData ìƒì„± & Axios

* Blob ë°ì´í„° ë³€í™˜ ë° FormData ìƒì„± ì´ìœ 
  * ì‚¬ìš©ì ë¡œì»¬ì— ì €ì¥í•˜ì§€ ì•Šê³  íŒŒì¼ì„ ë¯¸ë””ì–´ íŒŒì¼ì— ì—…ë¡œë“œ >> Blob ë°ì´í„° ë³€í™˜ í›„ ë°ì´í„° PUSH
  * inputì— ë°ì´í„° ê°’ì„ JSë¡œ ë³€ê²½í•  ìˆ˜ ì—†ëŠ” ì •ì±… >> ìƒˆë¡œìš´ FormData ìƒì„±í›„ í•´ë‹¹ ë°ì´í„° POST

```javascript
function submitFunc(){
  event.preventDefault()
  let drawCanvas = document.querySelector('#drawCanvas')
	
  data = new FormData()                                                           	// FormData ìƒì„±
	

  var imgDataUrl = drawCanvas.toDataURL('image/png');
  var binaryData = atob(imgDataUrl.split(',')[1]);                           	 	   // Blob ë°ì´í„° ë³€í™˜
  var array = [];
  for (var i = 0; i < binaryData.length; i++) {
    array.push(binaryData.charCodeAt(i));
  }
  var blob = new Blob([new Uint8Array(array)], {type: 'image/png'});


  const title = document.querySelector('#title')
  const content = document.querySelector('#content')
  const moviePk = "{{movie.pk}}"
  if (drawBtnFlag) {
  } else {
    data.set('draw', blob, 'my_draw.png')
  }
  data.set('title', title.value)
  data.set('content', content.value)
	
  axios({                                                           								// Axios
    url: '',
    method: 'POST',
    data: data,
    headers: {"X-CSRFToken": csrfToken, "Content-Type": "multipart/form-data" },
  })
    .then(response => {
      window.location.href = `/movies/detail/${moviePk}/`
    })
    .catch(err => {
      alert("ì‘ì„± ê°’ì— ì´ìƒì´ ìˆì–´ìš”")
    })
}
```

#### 

##### review_create / quiz_create

```python
@login_required
@require_http_methods(['GET','POST'])
def review_create(request, movie_pk):
    movie = Movie.objects.get(pk = movie_pk)
    
    # Profile Color Create
    colors = request.user.usercolorrecord_set.all()                # Color List
    last_color = colors[len(colors)-1]                             # Picked Color
    colors = reversed(colors)                                      # Color Sort(Recently)
    
    if request.method == "POST":
        form = ReviewForm(request.POST, request.FILES)
        if form.is_valid():
            review = form.save(commit=False)
            review.movie = movie
            review.user = request.user
            review.save()
            request.user.point += 30
            request.user.save()
            return redirect('movies:detail', movie_pk)
    else:
        form = ReviewForm()
    context = {
        'movie': movie,
        'form': form,
        'last_color': last_color,
        'colors': colors,
    }
    return render(request, 'movies/review_create.html', context)
  
@login_required
@require_http_methods(['GET','POST'])
def quiz_create(request):
    # Profile Color Create
    colors = request.user.usercolorrecord_set.all()                # Color List
    last_color = colors[len(colors)-1]                             # Picked Color
    colors = reversed(colors)                                      # Color Sort(Recently)
    
    movies = Movie.objects.all()
    
    if request.method == "POST":
        form = QuizForm(request.POST, request.FILES)
        if form.is_valid():
            quiz = form.save(commit=False)
            quiz.user = request.user
            quiz.save()
            request.user.point += 30
            request.user.save()
            return redirect('movies:index', 2)
    else:
        form = QuizForm()
    context = {
        'form': form,
        'last_color': last_color,
        'colors': colors,
        'movies': movies,
    }
    return render(request, 'movies/quiz_create.html', context)
```



### `Quiz`

##### í€´ì¦ˆ í’€ì´ í™”ë©´

* ì‚¬ìš©ìë³„ë¡œ ë§ì¶˜ ë¬¸ì œëŠ” ë³´ì´ì§€ ì•ŠìŒ

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-11-25 á„‹á…©á„’á…® 2.31.29](README.assets/quiz.png)

* Axiosì™€ quiz_check(views.py) ì²˜ë¦¬

> ë¬¸ì œì˜ pkì™€ ì œì¶œëœ value pk ë¥¼ ë¹„êµ

* JS Code

```javascript
{% block option_js %}
<script>
  const forms = document.querySelectorAll("#answerForm")
  const csrfToken = document.querySelector('[name=csrfmiddlewaretoken]').value

  for(const form of forms){
    form.addEventListener("submit", function (event) {
      event.preventDefault()
      const questionPk = event.target.dataset.questionPk
      const answer = event.submitter.value

      axios({
        method: 'post',
        url: '/movies/quiz_check/',
        headers: {'X-CSRFToken': csrfToken},
        data: {
          test: "Test",
          question_pk: `${questionPk}`,
          answer: `${answer}`,
        }
      })
        .then(function (res) {
          const correct = res.data.correct
          const main = document.querySelector(`#main${questionPk}`)
          const right = document.querySelector(`#right${questionPk}`)
          const wrong = document.querySelector(`#wrong${questionPk}`)

          if (correct) {
            main.classList.add('d-none')
            right.classList.remove('d-none')
          } else {
            main.classList.add('d-none')
            wrong.classList.remove('d-none')
          }
        })
        .catch(function (err) {
          console.log(err)
        })
    })
  } 
</script>
{% endblock option_js %}
```

* quiz_check.py

```python
@login_required
@require_http_methods(['GET','POST'])
def quiz_check(request):
    post_body = json.loads(request.body.decode('utf-8'))
    
    question_pk = post_body.get('question_pk')
    answer = post_body.get('answer')

    quiz = Quiz.objects.get(pk=question_pk)
    correct = False

    if int(quiz.movie.pk) == int(answer):
        print("ì •ë‹µ")
        correct = True
        
        request.user.point += 20
        quiz.correct_user.add(request.user)
        request.user.save()

    context = {
        "correct": correct,
    }

    return JsonResponse(context)
```



##### í€´ì¦ˆ ë§Œë“¤ê¸° í™”ë©´

* ì˜í™” ì„ íƒ í›„, ë¬¸ì œë¥¼ ê·¸ë¦¼íŒìœ¼ë¡œ ê·¸ë¦¬ê³  ë°”ë¡œ ì¶œì œ ê°€ëŠ¥

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-11-25 á„‹á…©á„’á…® 2.31.43](README.assets/quiz_create.png)

* ì½”ë“œ  - ìƒë‹¨ ë“œë¡œì‰ ì°¸ì¡°



##### í€´ì¦ˆ ë²„íŠ¼ ì œì¶œì‹œ(ë¹„ë™ê¸° ì—…ë°ì´íŠ¸)

* ë§ì¶”ê³  í‹€ë¦° ê²ƒì— ë”°ë¼ í•´ë‹¹ ë¬¸ì œê°€ ì²´í¬ë˜ê³  ì‚¬ìš©ìê°€ ìŠ¤í¬ë¡¤ì„ ë‚´ë¦´ ìˆ˜ ìˆë„ë¡ UI êµ¬ì„±
* classList.add / remove d-none + promise ë™ì‘ë°©ì‹ìœ¼ë¡œ êµ¬ì„±

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-11-25 á„‹á…©á„’á…® 2.32.42](README.assets/right.png)

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-11-25 á„‹á…©á„’á…® 2.31.54](README.assets/wrong.png)



### `DB`

> ColorData, TMDB API(ì˜í™” ì •ë³´), Youtube Data(trailer) ë“±ì´ ë“¤ì–´ê°ì— ë”°ë¼ ìƒˆë¡œìš´  DBë¥¼ ë§Œë“¤ í•„ìš”



##### DB Modeling

* ê¸°ëŠ¥ê³¼ ë“¤ì–´ê°ˆ ë°ì´í„°ê°€ ë§ì€ ë§Œí¼ ê·œëª¨ê°€ ìˆëŠ” DataBase ìƒì„±
* BASE ë°ì´í„°ì¸ ì˜í™”ë°ì´í„°ëŠ” ì§ì ‘ ì¡°í•©í•´ì„œ PUSH í•´ì•¼í•  í•„ìš”
  * í´ëŸ¬ìŠ¤í„°ë§ ë° RGB ë„ì¶œëœ ë°ì´í„°
  * TMDB API ì˜í™”ì •ë³´
  * Youtube Trailer URL ë“±

![erd](README.assets/erd-7816963.png)



##### Frame ì´ë¯¸ì§€ PUSH

![color_url_push](README.assets/color_url_push.png)



##### Color Model Database PUSH

* ë§Œë“¤ì–´ì§„ json ë°ì´í„°ë¥¼ Movieë¥¼ ì •ì°¸ì¡° í•˜ê³  ìˆëŠ” Color ëª¨ë¸ì— PUSH

* íŠ¹ì •ìƒ 5ê°œ RGB ë°ì´í„° PUSH
* ìš”ì†Œê°€ ë§ìœ¼ë¯€ë¡œ ì‘ì—… ì „ Python ì´ìš©
* ![datastringmake](README.assets/datastringmake.png)

![makecolorsdata](README.assets/makecolorsdata.png)

* Result

![res](README.assets/res.png)



##### TMDB API í˜¸ì¶œ ë° í•´ë‹¹ ë°ì´í„° PUSH

* Response ë°ì´í„°

* ![json](README.assets/json.png)

![for](README.assets/for.png)



##### ê¸°ì¡´ì— Naver í‰ì ì„ API í˜¸ì¶œí•˜ë ¤ í–ˆìœ¼ë‚˜, ì˜í™”ì œëª© í¬í•¨ì—¬ë¶€ë¡œ responseë¥¼ ì£¼ì–´ì„œ TMDB í‰ì ìœ¼ë¡œ ë³€ê²½

* Naver

![naver](README.assets/naver.png)

* TMDB

![requests](README.assets/requests.png)

* Result

![res2](README.assets/res2.png)

![result2](README.assets/result2.png)



##### Youtube Trailer Link PUSH

* Iframe ì˜ˆê³ í¸ ì‘ì—… ì „ link PUSH

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-11-23 á„‹á…©á„’á…® 7.11.11](README.assets/iframe.png)



### `Query ìµœì í™”`

> ë³µì¡í•œ ëª¨ë¸êµ¬ì¡°ë¡œ ì—­ì°¸ì¡°, ì •ì°¸ì¡° ë¶€ë¶„ì—ì„œ ì¤‘ë³µ Query ë°œìƒ



##### Query ìµœì í™” ì‘ì—… ì „ Index Page

* 408 Query / Time 7000ms ~ 9000ms

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-11-22 á„‹á…©á„Œá…¥á†« 10.25.55](README.assets/query1.png)



##### Query ìµœì í™” ì‘ì—… í›„ Index Page

* 9 Query / Time 250ms ~ 300ms (ì•½ Query 1/40, Time 1/30 ìœ¼ë¡œ ê²½ëŸ‰í™”)

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-11-22 á„‹á…©á„Œá…¥á†« 11.44.30](README.assets/query2.png)



##### ì‚¬ìš© Stack

* ##### prefetched_realated - (ì—­ì°¸ì¡° ë°ì´í„° ì‚¬ì „ ë“±ë¡)

* ##### annotate - (count ì‚¬ì „ ë“±ë¡)

* ##### filter, exclude ë“± - ê³„ì‚° ìµœì í™”

```python
# index/views.py

    # Exclude Already Watched Movies(Query Optimization)
    already_watched_movies = set()

    users_moviecomments = MovieComment.objects.filter(user=request.user.pk).values('movie')
    for users_moviecomment in users_moviecomments:
        already_watched_movies.add(users_moviecomment['movie'])

    users_reviews = Review.objects.filter(user=request.user.pk).values('movie')
    for users_review in users_reviews:
        already_watched_movies.add(users_review['movie'])

    # Query Optimization - movie.color_set + Exclude Already Watched Movies + movie.comments_set + movie.comments.all.count()
    movies = Movie.objects.prefetch_related('color_set','comments')\
            .annotate(comment_count=Count('comments'))\
            .exclude(id__in=already_watched_movies)
    
    res_movies = []
    
    # Order by TMDB_Grade + User_Grade
    if mode == 2:
        for movie in movies:
            naver_score = movie.naver_grade
            user_score = 0 
            for comment in movie.comments.all():
                user_score += comment.grade
            if user_score:
                user_score = round((user_score / movie.comment_count),1) * 2
                score = (naver_score + user_score) / 2
            else:
                score = naver_score
            res_movies.append([movie, score])
    
    # Order by Release Date
    elif mode == 3:
        for movie in movies:
            score = movie.release_date
            res_movies.append([movie, score])
    
    # Order by Search
    elif mode == 4:
        datas = request.GET['searchData'].split()                      # Input Data list
        for movie in movies:                                           # query in title : +10, query in overview +1
            temp_cnt = 0
            title = movie.title
            overview = movie.overview
            for data in datas:
                if data in title:
                    temp_cnt += 10
                if data in overview:
                    temp_cnt += 1
            if temp_cnt >= 1:                                          # If query in title, content, Can be Searched
                res_movies.append([movie,temp_cnt])

```



### `ë°°í¬`

> AWS EC2(Ubuntu Server 18.04 LTS), Cloud9, Gunicorn, NGINX
>
> Django contains STATIC / MEDIA
>
> ##### https://www.prismfilmstudio.com

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-11-25 á„‹á…©á„’á…® 3.29.14](README.assets/aws.png)



##### NGINX ì„¤ì •

* staticê³¼ media filesê°€ í¬í•¨ë˜ì–´ ìˆì–´ NGINXì—ì„œ ì ‘ê·¼í•˜ì§€ ëª»í•˜ëŠ” ì´ìŠˆê°€ ë°œìƒ(404)
* staticì€ ê²½ë¡œë¥¼  staticfiles/staticìœ¼ë¡œ ì¡ì•„ì¤˜ì„œ staticfiles/static ê²½ë¡œë¥¼ ë§Œë“¤ì–´ ì¤Œìœ¼ë¡œì¨ í•´ê²°
* media íŒŒì¼ ì ‘ê·¼ì˜ ê²½ìš°ì—ëŠ” static ì²˜ëŸ¼ rootë¡œ ì¡ì•„ì£¼ë©´ ì—ëŸ¬ê°€ ë°œìƒ
  * aliasë¡œ ë°”ê¿” mediaíŒŒì¼ì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ì²˜ë¦¬

```shell
   server_name 18.214.88.219 prismfilmstudio.com www.prismfilmstudio.com;

    location ^~ /static/ {
            root /home/ubuntu/pjt10/staticfiles/;
    }

    location ^~ /media/ {
            alias /home/ubuntu/pjt10/media/;
    }

    location / {
            include proxy_params;
            proxy_pass http://127.0.0.1:8000;
    }

listen 443 ssl; # managed by Certbot
ssl_certificate /etc/letsencrypt/live/prismfilmstudio.com/fullchain.pem; # managed by Certbot
ssl_certificate_key /etc/letsencrypt/live/prismfilmstudio.com/privkey.pem; # managed by Certbot
```



##### Django & Gunicorn ì„¤ì •

* Django - STATIC ROOT, ALLOWED_HOSTS, collectstatic ëª…ë ¹
* Gunicorn ì„¤ì •

```shell
[Unit]
Description=gunicorn daemon
After=network.target

[Service]
User=ubuntu
Group=www-data
WorkingDirectory=/home/ubuntu/pjt10
ExecStart=/home/ubuntu/pjt10/venv/bin/gunicorn \
        --workers 3 \
        --bind 127.0.0.1:8000 \
        pjt10.wsgi:application

[Install]
WantedBy=multi-user.target
```



##### ë„ë©”ì¸ ì„¤ì • & í¬íŠ¸ ì„¤ì • & HTTPS

* www.~ ìœ¼ë¡œë„ ë“¤ì–´ì˜¬ ìˆ˜ ìˆë„ë¡ A type í•˜ë‚˜ ë” ê°œë°© 

  ![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-11-25 á„‹á…©á„’á…® 3.40.07](README.assets/domain.png)

* í•´ë‹¹ ì„¤ì •ì— ë”°ë¥¸ NGINX ì„¤ì •
* HTTPS ì„¤ì •

```shell
sudo snap install core; sudo snap refresh core
sudo snap install --classic certbot
sudo ln -s /snap/bin/certbot /usr/bin/certbot
sudo certbot --nginx
```

* í¬íŠ¸ì„¤ì •

* 80 / 8000 / 443(https) => 0.0.0.0/0 / ::/0 ê°œë°©

  ![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-11-25 á„‹á…©á„’á…® 3.44.55](README.assets/port.png)







## ğŸ“– Reference
formdata - https://developer.mozilla.org/ko/docs/Web/API/FormData

ê·¸ë¦¼íŒ - https://github.com/shlee0882/painting-js

blob Data ë³€í™˜ - https://codebb.tistory.com/22

ë°°ê²½ í…Œë§ˆ - https://codepen.io/trending

Axios - https://github.com/axios/axios

Base -  https://edu.ssafy.com

ì»¬ëŸ¬ë°”ì½”ë“œ - https://happycoding.io/gallery/movie-colors/index

ëŒ€í‘œ ìƒ‰ì±„ - https://airows.com/culture/color-palettes-from-famous-movie-scenes

í‹°ì–´ ì‹œìŠ¤í…œ - https://www.acmicpc.net/, https://solved.ac/



## ğŸ“œ ë§ˆì¹˜ë©°

#### ê¹€ì£¼í˜¸

```
ì•„ì´ë””ì–´ íšŒì˜ì— ìƒë‹¹í•œ ê³µì„ ë“¤ì˜€ë‹¤. ì•„ì´ë””ì–´ê°€ ë– ì˜¤ë¥´ì§€ ì•Šìœ¼ë©´ ì‘ì—… ì°©ìˆ˜í•˜ê¸° í˜ë“  íƒ€ì…ì¸ë°, ë‹¤í–‰íˆ í˜ì–´ì˜€ë˜ ê±´í¬ë‹˜ê»˜ì„œ ì•„ì´ë””ì–´ë¥¼ ì†ì‰½ê²Œ ë„ì¶œí•  ìˆ˜ ìˆë„ë¡ í¸í•œ ë¶„ìœ„ê¸°ë¥¼ ë§Œë“¤ì–´ ì£¼ì…”ì„œ ì¢‹ì€ ì•„ì´ë””ì–´ë“¤ì´ ë§ì´ ë‚˜ì˜¬ ìˆ˜ ìˆì—ˆë˜ ê²ƒ ê°™ë‹¤.

ì´ˆë°˜ ë°ì´í„°ì‘ì—…ê³¼ C# ì½”ë“œë¥¼ ë³‘í–‰í•˜ëŠë¼ ì›¹í˜ì´ì§€ ìª½ì—ëŠ” ì‹ ê²½ì„ ë§ì´ ëª» ì¼ì—ˆëŠ”ë°, ì‘ì—… ì¢…ë£Œ í›„ ì‚´í´ë³´ë‹ˆ ê±´í¬ë‹˜ê»˜ì„œ ëŒ€ë¶€ë¶„ì˜ êµ¬ì¡°ì™€ í‹€ì„ ì¡ì•„ ë†“ì€ ìƒíƒœë¼ ë†€ë¼ì› ê³ , ê°ì‚¬í–ˆê³ , í•œí¸ìœ¼ë¡œëŠ” ì •ë§ ì£„ì†¡ìŠ¤ëŸ¬ì› ë‹¤. ì˜¤ëœë§Œì— C#ì„ ë‹¤ë¤˜ë˜ì§€ë¼ ì½”ë“œê°€ ìê¾¸ ì œë©‹ëŒ€ë¡œ êµ´ëŸ¬ê°€ì„œ ìˆ˜ì •í•˜ëŠ” ì‹œê°„ë„ ê½¤ ê±¸ë ¸ê³ , ì˜í™” ì˜ˆê³ í¸ ì €ì¥ ë° ë°ì´í„° ì¶”ì¶œê¹Œì§€ í•´ì„œ ëŒ€ëµ 2~3ì¼ì´ ê±¸ë ¸ëŠ”ë° ê·¸ ì•ˆì— ì–´ë–»ê²Œ ê·¸ë ‡ê²Œ ë‹¨ë‹¨í•œ í‹€ì„ ë§Œë“¤ì–´ ë‘ì…¨ì„ê¹Œ?
ê°€ë§Œíˆ ìˆì„ ìˆ˜ë§Œì€ ì—†ì–´ì„œ ë‚´ê°€ í•  ìˆ˜ ìˆëŠ”ê±¸ ìµœëŒ€í•œ í•˜ë ¤ê³  í–ˆë‹¤. ì•ì„œ ë§Œë“  ë°ì´í„°ë“¤ì„ ì •ëˆí•˜ê³ , ì›¹í˜ì´ì§€ì—ì„œ ì•½ê°„ì˜ ë””í…Œì¼ë“¤ì„ ì¶”ê°€ì‹œí‚¤ë©° 'ì–´ë–»ê²Œ í•´ì•¼ ë” ìœ ì €ì—ê²Œ ê¹”ë”í•œ ì¸ìƒì„ ì¤„ ìˆ˜ ìˆì„ê¹Œ?'ë¥¼ ê³ ë¯¼í–ˆë‹¤.

ì¹˜ì•„ êµì •ìœ¼ë¡œ ë³¸ê°€ì— ì ì‹œ ë‹¤ë…€ì˜¨ ì‚¬ì´ì—, í™ˆí˜ì´ì§€ë¥¼ ë” í¸í•˜ê³  ê¸°ëŠ¥ì ì´ê²Œ êµ¬í˜„í•œ ê±´í¬ë‹˜ì„ ëµ™ê³ ì„  ì—¬ëŸ¬ ë§Œê°ì´ êµì°¨í–ˆë‹¤. ë‚œ ì •ë§ ì—´ì‹¬íˆ í•˜ê³  ìˆëŠ”ê°€? ë‚˜ ë•Œë¬¸ì— ê±´í¬ë‹˜ì˜ ì•„ì´ë””ì–´ê°€ êµ¬í˜„ë˜ì§€ ëª» í•˜ëŠ” ê²½ìš°ê°€ ìƒê¸°ì§€ ì•Šì„ê¹Œ?
ìì·¨ë°©ì— ì•‰ì•„ ì»´í“¨í„°ë¥¼ ì¼œë©° ê³¨ë˜˜íˆ ìƒê°í–ˆë‹¤. ê·¸ë¦¬ê³ ì„  'ë‚´ê°€ ë¶€ì¡±í•¨ì´ ìˆë‹¤ í•œë“¤, ê±´í¬ë‹˜ì˜ ë°œëª©ì„ ë¶™ì¡ëŠ” ëª¨ì–‘ìƒˆëŠ” ë˜ì§€ ë§ì•„ì•¼ê² ë‹¤'ê³  ë‹¤ì§í–ˆë‹¤.

ìš°ë¦¬ëŠ” ì—´ì •ì ìœ¼ë¡œ ì‰¬ëŠ” ì‹œê°„ë„ ì¤„ì—¬ê°€ë©° ì‘ì—…ì— ëª°ë‘í–ˆë‹¤. ê±´í¬ë‹˜ì€ ê³„ì†í•´ì„œ ë” ê°„í¸í•˜ê³  ì§œì„ìƒˆìˆê²Œ ì›¹í˜ì´ì§€ë¥¼ êµ¬ì¶•í•´ ë‚˜ì•„ê°”ìœ¼ë©°, ë‚˜ë„ ê·¸ í˜ì´ìŠ¤ì— ë§ì¶° ì—´ì‹¬íˆ ë¨¸ë¦¬ë¥¼ êµ´ë¦¬ê³  ì†ì„ ì›€ì§ì˜€ë‹¤. í˜ë“¤ì–´ì„œ ì ì‹œ ì‰¬ê³  ì‹¶ì—ˆì„ ë•Œë„ ìˆì—ˆì§€ë§Œ, ë‚˜ë³´ë‹¤ ë” ê³ ìƒí•˜ì‹œëŠ” ê±´í¬ë‹˜ì„ ë³´ë©´ì„œ ë”ìš± ë” ì—´ì‹¬íˆ ì°¸ì—¬í–ˆë‹¤.

ê³„íší•œ ëŒ€ë¶€ë¶„ì˜ ê²ƒë“¤ì„ ì´ë£¨ê³  ë‚˜ì„œë„, ìš°ë¦¬ëŠ” ë” ë§ì€ ê²ƒë“¤ì„ ìƒê°í–ˆë‹¤. ì£¼ë³€ ì§€ì¸ë“¤ì—ê²Œ ì›¹í˜ì´ì§€ì— ëŒ€í•´ ë³´ì—¬ì¤¬ëŠ”ë°, ë‹¤ë“¤ í¥ë¯¸ëŠ” ëŠë‚„ì§€ì–¸ì • í˜ì´ì§€ì—ì„œ ë§ì€ ì‹œê°„ì„ ë³´ë‚´ì§„ ì•Šì•˜ê³ , ìš°ë¦¬ëŠ” ê·¸ ë•Œ 'ì‚¬ìš©ìì˜ ì…ì¥ì—ì„œ ìƒê°í•˜ë¼'ëŠ” ë§ì„ ë– ì˜¬ë ¸ë‹¤.
ê·¸ë˜, í¥ë¯¸ë„ ì¤‘ìš”í•˜ì§€ë§Œ ì¬ë¯¸ë„ ì¤‘ìš”í•˜êµ¬ë‚˜.
ìš°ë¦° ì‚¬ìš©ìì—ê²Œ ì¬ë¯¸ë¥¼ ì£¼ê¸° ìœ„í•´ í•˜ë£¨ë¥¼ ì˜¨í†µ íˆ¬ìí•˜ì—¬ ìƒˆë¡œìš´ í˜ì´ì§€ë¥¼ êµ¬ì¶•í•˜ì˜€ê³ , í”¼ê³¤í•œ ì™€ì¤‘ì—ë„ ì„œë¡œ ëŒ€í™”í•˜ê³  ë°°ë ¤í•˜ë©° ë§ˆì¹¨ë‚´ ì™„ì„±í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤.

í•´ë‹¹ í”„ë¡œì íŠ¸ê°€ í˜ë“¤ì§€ ì•Šì•˜ë‹¤ë©´ ê±°ì§“ì´ê² ì§€ë§Œ ê·¸ë§Œí¼ ë¿Œë“¯í•œ ê°ì •ì„ ëŠê¼ˆê³ , ì´ë¡œ ì¸í•´ ë§ì€ ê²ƒì„ ë°°ì› ë‹¤ê³  ë‹¹ë‹¹íˆ ë§í•  ìˆ˜ ìˆë‹¤. íŠ¹íˆë‚˜ ê±´í¬ë‹˜ì˜ ê³„íšì„±ê³¼ ê³§ì€ ì˜ì§€ì— ì˜í–¥ì„ ë§ì´ ë°›ì•„, 'ì–´ë– í•œ í”„ë¡œê·¸ë˜ë¨¸ê°€ ë˜ì–´ì•¼ í•˜ëŠ”ê°€'ë¥¼ ê³ ì°°í•˜ê²Œ ëœ ì†Œì¤‘í•œ ì‹œê°„ì´ì—ˆë˜ ê²ƒ ê°™ë‹¤.

ì •ë§ ë§ì€ ê²ƒì„ ê¹¨ë‹«ê³  ë°°ìš¸ ìˆ˜ ìˆê²Œë” í•´ ì£¼ì‹  ë‚˜ì˜ í˜ì–´ ê±´í¬ë‹˜, ì„±ì¥í•  ê³„ê¸°ë¥¼ ì¤€ ì‹¸í”¼ì™€ ì¡°ì–¸ì£¼ì‹  êµìˆ˜ë‹˜, ì‘ì›í•´ì¤€ ëŒ€ì „ 2ë°˜ ë™ê¸°ë¶„ë“¤ê³¼ ì£¼ë³€ ì§€ì¸ë“¤ì—ê²Œ ì§„ì‹¬ìœ¼ë¡œ ê°ì‚¬ ë“œë¦¬ë©° ê¸€ì„ ë§ˆì¹˜ê² ë‹¤.
```



#### ì´ê±´í¬

```
ì£¼í˜¸ë‹˜ê³¼ í•¨ê»˜ì—¬ì„œ ì˜ ë§ˆì¹  ìˆ˜ ìˆì—ˆë‹¤. ì˜í•˜ê³  ì‹¶ì€ ìš•ì‹¬ ë•Œë¬¸ì— ì„œë‘ë¥´ê³  ì¡°ê¸‰í•˜ê²Œ í˜ì–´ë¶„ì„ ëŒ€í•œ ê²ƒì„ ì•„ë‹ˆì—ˆì„ ì§€ í›„íšŒê°€ ëœë‹¤. ë‹¤ë¥¸ ì‚¬ëŒê³¼ í•¨ê»˜í•˜ëŠ” ì²« í”„ë¡œì íŠ¸ì—¬ì„œ ì„œíˆ° ë¶€ë¶„ë„ ë§ê³ , í˜ë“  ë¶€ë¶„ë„ ìˆì—ˆì„ í…ë° ë‚´ìƒ‰í•˜ì§€ ì•Šê³  ë§ˆì§€ë§‰ê¹Œì§€ ê°™ì´ ì˜ ì™€ì£¼ì‹  ì£¼í˜¸ë‹˜ì—ê²Œ ê°ì‚¬ì˜ ëœ»ì„ ì „í•œë‹¤.

ì´ˆë°˜ì— ê°€ì§€ê³  ìˆì—ˆë˜ ìƒê°, 'ê²°ê³¼ê°€ ì¢‹ìœ¼ë©´ ì¢‹ë‹¤.'ë¼ëŠ” ìƒê°ì´ ê³¼ì—° ë§ë˜ ìƒê°ì¼ê¹Œ, í˜‘ì—…ì´ë¼ëŠ” í•¨ê»˜ ê°€ëŠ” ê²ƒì—ì„œ ì´ ìƒê°ì€ í‹€ë¦´ ìˆ˜ë„ ìˆê² ë‹¤ê³  ìƒê°í•œë‹¤. ê·¸ë˜ì„œ ì´ í‹€ë¦° ìƒê°ì„ ê¸°ì €ë¡œ í•œ ê²ƒì— ëŒ€í•´ì„œ ì˜ í•¨ê»˜ ì™€ì£¼ì‹  í˜ì–´ë¶„ì— ëŒ€í•œ ê³ ë§ˆì›€ì´ í° ê²ƒ ê°™ë‹¤.

í”„ë¡œì íŠ¸ì˜ ì™„ì„±ë„ëŠ” ë†’ë‹¤. ì•½ 7ì¼, 8ì¼ì´ë¼ëŠ” ì‹œê°„ë™ì•ˆ ì •ë§ ë§ì€ ê²ƒì„ êµ¬í˜„í–ˆë‹¤. ë§Œë“¤ê³  ì‹¶ì€ ê±´ ëŒ€ë¶€ë¶„ ë§Œë“  ê²ƒ ê°™ë‹¤. í•˜ì§€ë§Œ ì´ ì½”ë“œ ê·¸ëŒ€ë¡œ ë‹¤ë¥¸ ì‚¬ëŒì´ ìš´ì˜í•œë‹¤ë©´?, ê¸€ì„ ë¶€ì¡±í•œ ë¶€ë¶„ì´ êµ‰ì¥íˆ ë§ì„ ê²ƒ ê°™ë‹¤. ì •ë§ ê¹”ë”í•˜ê³  ì •ì œë˜ê³ , ì¤‘ë³µìš”ì†Œë¥¼ í”¼í•˜ê³ , ì»¤ë©˜íŠ¸ë¥¼ í†µí•œ ì„¸ì…˜êµ¬ë¶„ê¹Œì§€ ì •ì œëœ ì½”ë“œë¡œ ë§Œë“¤ë ¤ê³  ë§ì´ ê³µë“¤ì˜€ë‹¤. ë‹¤ë§Œ, ë§ˆì§€ë§‰ í€´ì¦ˆë¶€ë¶„ì„ í•˜ë©° ì¡°ê¸‰í•´ì§€ë©° í•´ë‹¹ ë¶€ë¶„ì— ëŒ€í•œ ì½”ë“œ ì •ì œ ë° ë¯¸ë””ì–´ íŒŒì¼ ìš©ëŸ‰ ì²˜ë¦¬ê°€ ì´ë£¨ì–´ ì§€ì§€ ì•Šì•˜ë‹¤. ê·¸ë˜ì„œ ë” ì•„ì‰¬ì›€ì´ í¬ë‹¤. ë˜, ì•„ë¬´ë¦¬ ê³µë“¤ì˜€ë‹¤ í•˜ë”ë¼ë„ í˜„ì—…ìê°€ ë³´ë©´ ë§ì´ ë¶€ì¡±í•œ ì½”ë“œì¼ ê²ƒì´ ë¶„ëª…í•˜ë‹¤. ë‚´ê°€ ëª¨ë¥´ëŠ” ë¶€ë¶„, ë¯¸ìˆ™í•œ ë¶€ë¶„ì€ ì§€ê¸ˆ ê°œë°œ í˜„ì—…ì—ì„œ ëŒ€ë¶€ë¶„ì¼ í…Œë‹ˆê¹Œ. ë‹¨, ìµœì„ ì„ ë‹¤í–ˆìŒì—ëŠ” í‹€ë¦¼ì´ ì—†ë‹¤. í° ì¼ì€ ìš°ì—°íˆ ì´ë£¨ì–´ì§€ì§€ ì•Šë“¯ì´, ì‘ì€ ì¼ í•˜ë‚˜í•˜ë‚˜ì— ìµœì„ ì„ ë‹¤í•œ ê²ƒ ê°™ë‹¤.

1í•™ê¸°ë¥¼ ë§ˆì¹˜ëŠ” í”„ë¡œì íŠ¸ì´ê¸°ì— 1í•™ê¸°ì— ëŒ€í•œ ìƒê°ë„ ë§ë‹¤.
ì˜¤ëœì‹œê°„ì„ ì •ë§ ì¹œì ˆí•˜ê³  ì˜ ì§€ë„í•´ì£¼ì‹  juan êµìˆ˜ë‹˜ê³¼ í•¨ê»˜ ë‹¬ë ¤ì˜¨ ì†Œì¤‘í•œ ìš°ë¦¬ë°˜ ë™ê¸°ë¶„ë“¤, ë¶€ì¡±í•œ ë‚˜ì™€ í˜ì–´ë¡œ í•¨ê»˜ í–ˆë˜ ì§€ì˜ë‹˜, ì§„ì„­ë‹˜, ê·¸ë¦¬ê³  ì •ë§ ê°ì‚¬í•œ ì£¼í˜¸ë‹˜ê¹Œì§€. SSAFYì—ì„œ ë§ì€ ê²ƒì„ ë°°ìš°ê³  ì‹¶ì—ˆë‹¤. ê·¸ ê²ƒì„ í–¥í•´ ë‹¬ë ¤ê°€ëŠ”ë° ìˆì–´ ì´ ë¶„ë“¤ì´ ì—†ì—ˆë‹¤ë©´ ë¶ˆê°€ëŠ¥í•˜ì§€ ì•Šì•˜ì„ê¹Œ ì‹¶ë‹¤.

í”„ë¡œì íŠ¸ëŠ” ì—¬ê¸°ì„œ ë§ˆì³ ì‹œì›ì„­ì„­í•œ ë§ˆìŒì´ í¬ì§€ë§Œ, ê°œë°œì„ ê³„ì† í•  ìˆ˜ ìˆìœ¼ë‹ˆê¹Œ, ê·¸ê±¸ë¡œ ì¢‹ë‹¤.
```

